<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="<p>El Kernel Linux versión 2.6.29 fue liberado por Linus Torvalds en marzo de 2009. Entre muchas novedades, otorga un soporte inicial del nuevo sistema de archivos Btrfs.</p>">
    <meta name="keywords" content="[<Tag 'gentoo linux'>, <Tag 'kernel linux'>]">
    <meta name="author" content="Guillermo Valdés Lozano">
    <meta itemprop="name" content="Kernel Linux 2.6.29 para Dell Inspiron 9300 con Gentoo Linux">
    <meta itemprop="description" content="<p>El Kernel Linux versión 2.6.29 fue liberado por Linus Torvalds en marzo de 2009. Entre muchas novedades, otorga un soporte inicial del nuevo sistema de archivos Btrfs.</p>">
    <meta itemprop="image" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@guivaloz">
    <meta name="twitter:title" content="Kernel Linux 2.6.29 para Dell Inspiron 9300 con Gentoo Linux">
    <meta name="twitter:description" content="<p>El Kernel Linux versión 2.6.29 fue liberado por Linus Torvalds en marzo de 2009. Entre muchas novedades, otorga un soporte inicial del nuevo sistema de archivos Btrfs.</p>">
    <meta name="twitter:image:src" content="">
    <meta property="og:title" content="Kernel Linux 2.6.29 para Dell Inspiron 9300 con Gentoo Linux">
    <meta property="og:type" content="article">
    <meta property="og:url" content="apuntes/kernel-linux-2.6.29/">
    <meta property="og:image" content="">
    <meta property="og:description" content="<p>El Kernel Linux versión 2.6.29 fue liberado por Linus Torvalds en marzo de 2009. Entre muchas novedades, otorga un soporte inicial del nuevo sistema de archivos Btrfs.</p>">
    <meta property="og:site_name" content="Movimiento Libre">
    <title>Kernel Linux 2.6.29 para Dell Inspiron 9300 con Gentoo Linux - Movimiento Libre</title>
    <link rel="shortcut icon" type="image/x-icon" href="http://www.movimientolibre.com/favicon.ico">
    <link rel="icon" href="http://www.movimientolibre.com/theme/images/icon-hires.png" sizes="192x192">
    <link rel="icon" href="http://www.movimientolibre.com/theme/images/icon-normal.png" sizes="128x128">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-76x76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="alternate" href="http://www.movimientolibre.com/feeds/all.rss.xml" type="application/rss+xml" title="Movimiento Libre Full RSS Feed" />
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/vendor/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/css/blog-post.css">
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/css/movimiento-libre.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,700">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="http://www.movimientolibre.com/">Movimiento Libre</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/category/apuntes.html">Apuntes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/category/articulos.html">Artículos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/category/presentaciones.html">Presentaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/portafolio/contacto/">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-lg-8">
    <article>
        <h1 class="mt-4">Kernel Linux 2.6.29 para Dell Inspiron 9300 con Gentoo Linux</h1>
        <p class="lead">Guillermo Valdés Lozano</p>
        <p>2009-06-17 21:45:00-05:00</p>
        <hr>
        <p>El <a href="http://www.linux.org/">Kernel Linux</a> versión 2.6.29 fue liberado por <a href="http://es.wikipedia.org/wiki/Linus_Torvalds">Linus Torvalds</a> en marzo de 2009. Entre muchas novedades, otorga un <em>soporte inicial</em> del nuevo sistema de archivos <a href="http://es.wikipedia.org/wiki/Btrfs">Btrfs</a>. Cuando el <em>Btrfs</em> sea considerado como <em>estable</em> se espera que sustituya por completo al <a href="http://es.wikipedia.org/wiki/Ext3">Ext</a>.</p>
<p><a href="http://es.wikipedia.org/wiki/Tux">Tux</a>, la mascota de Linux, se ha tomado tres meses sábaticos. La mascota de la versión 2.6.29 es <a href="http://en.wikipedia.org/wiki/Tux#Tuz">Tuz</a>. <em>Tuz</em> es un <a href="http://es.wikipedia.org/wiki/Sarcophilus_harrisii">Demonio de Tazmania</a> con un antifaz en forma de pico.</p>
<p>La razón de esta nueva imagen es promover las labores de conservación de esta especie. Su población ha disminuido significativamente por un <a href="http://es.wikipedia.org/wiki/Sarcophilus_harrisii#Tumor_facial_de_los_demonios">tumor facial</a>, enfermedad mortal para estos animales. Más información en <a href="http://tassiedevil.com.au/">Save The Tasmanian Devil</a>.</p>
<p>Regresando al software libre, hace un par de semanas esta versión del Linux (en concreto <em>gentoo-sources-2.6.29-r5</em>) fue marcada como <em>estable</em> en el <em>portage</em> de <a href="http://www.gentoo.org/">Gentoo Linux</a>. A continuación describo la configuración y compilación de este kernel para la portátil Dell Inspiron 9300...</p>
<h3>Descarga</h3>
<p>Como es habitual para <em>Gentoo Linux</em>, actualizamos primero el <em>portage</em>.</p>
<div class="highlight"><pre><span></span># emerge --sync
</pre></div>


<p>Ejecutamos <em>emerge</em> con el parámetro "p" que nos dirá la versión que pretendería instalar de <em>gentoo-sources</em>.</p>
<div class="highlight"><pre><span></span># emerge -pu gentoo-sources
</pre></div>


<p>Si estamos de acuerdo, instalamos el código fuente del kernel.</p>
<div class="highlight"><pre><span></span># emerge -u gentoo-sources
</pre></div>


<p>Encontraremos el código fuente en el directorio /usr/src</p>
<div class="highlight"><pre><span></span># ls -l /usr/src/
lrwxrwxrwx  1 root root   22 jun 11 20:19 linux -&gt; linux-2.6.29-gentoo-r5
drwxr-xr-x 22 root root 4096 jun 11 20:19 linux-2.6.29-gentoo-r5
</pre></div>


<p>Haga el enlace "linux" al "linux-2.6.29-gentoo-r5" manualmente si no lo tiene.</p>
<p>Nos cambiamos al directorio de las nuevas fuentes del kernel.</p>
<div class="highlight"><pre><span></span># cd /usr/src/linux
</pre></div>


<p>Esta es una representación gráfica del tamaño de los archivos contenidos en <em>/usr/src/linux-2.6.29-gentoo-r5</em></p>
<p><a href="kernel-2.6.29/usr-src-linux.png"><img class="img-fluid" src="kernel-2.6.29/usr-src-linux-small.jpg"></a></p>
<h3><em>Hackear</em> el controlador ipw2200</h3>
<p>Por defecto, la tarjeta inalámbrica Intel ipw2200 me permite usar <em>11 canales</em>. Es posible cambiar este parámetro a <em>14 canales</em>.</p>
<p>Con este cambio y con un <em>punto de acceso</em> en el canal 14 podrá establecer una comunicación fuera del rango de los equipos nacionales. En pocas palabras, una capa más de seguridad. Por ejemplo, un <em>LinkSys WRT54G</em> con <em>DD-WRT</em> me permite usar el canal 14:</p>
<p><a href="kernel-2.6.29/linksys-wrt54g-dd-wrt-channel-14.png"><img class="img-fluid" src="kernel-2.6.29/linksys-wrt54g-dd-wrt-channel-14-small.jpg"></a></p>
<p>Hay dos formas de cambiar este parámetro a <em>14</em>: alterando el EEPROM de la tarjeta inalábrica o cambiando el código fuente del controlador de la tarjeta antes de compilar el kernel. Le mostraré la segunda opción.</p>
<p>Por medio del editor <em>vim</em> cargue el código fuente del controlador.</p>
<div class="highlight"><pre><span></span># vim drivers/net/wireless/ipw2x00/ipw2200.c
</pre></div>


<p>Busque el texto <em>EEPROM_COUNTRY_CODE</em>. Para ello teclee "/", la cadena a buscar <em>EEPROM_COUNTRY_CODE</em> y presione <em>ENTER</em>.</p>
<div class="highlight"><pre><span></span>/EEPROM_COUNTRY_CODE
</pre></div>


<p>Lo anterior nos llevará a la línea del código del controlador que toma el valor de la locación geográfica fijada en la fábrica.</p>
<p>Observe el siguiente fragmento donde la línea con "-" es la original y la línea con "+" es la cambiada. Presione "i" para editar el texto y efectúe el cambio a "ZZR".</p>
<div class="highlight"><pre><span></span> for (j = 0; j &lt; ARRAY_SIZE(ipw_geos); j++) {
-    if (!memcmp(&amp;priv-&gt;eeprom[EEPROM_COUNTRY_CODE],
+        if (!memcmp(&quot;ZZR&quot;,
             ipw_geos[j].name, 3))
     break;
 }
</pre></div>


<p>Para terminar de editar, presione <em>ESC</em> para salir del modo de edición. Luego, para guardar y salir teclee dos puntos, "w", "q" y <em>ENTER</em>.</p>
<p>La región "ZZR" nos permite los 14 canales en redes 802.11bg. En el archivo <em>README</em> del controlador se encuentra la siguiente tabla sobre las regiones y canales que utilizan:</p>
<div class="highlight"><pre><span></span>                                          Supported channels
Code    Geography                       802.11bg        802.11a

---     Restricted                      11               0
ZZF     Custom US/Canada                11               8
ZZD     Rest of World                   13               0
ZZA     Custom USA &amp; Europe &amp; High      11              13
ZZB     Custom NA &amp; Europe              11              13
ZZC     Custom Japan                    11               4
ZZM     Custom                          11               0
ZZE     Europe                          13              19
ZZJ     Custom Japan                    14               4
ZZR     Rest of World                   14               0
ZZH     High Band                       13               4
ZZG     Custom Europe                   13               4
ZZK     Europe                          13              24
ZZL     Europe                          11              13
</pre></div>


<h3>Configurar el kernel</h3>
<p>Para configurar el kernel Linux usando la interfaz <em>ncurses</em> y estando en el directorio del kernel mismo ejecute el siguiente comando.</p>
<div class="highlight"><pre><span></span># make menuconfig
</pre></div>


<p>A partir de aquí estamos trabajando en la configuración, habilitando y deshabilitando opciones.</p>
<p>La portátil <em>Dell Inspiron 9300</em> tiene un procesador <em>Intel Pentium-M</em>, así que deshabilito el soporte multi-procesador y selecciono "Pentium M" como la <em>familia</em> del procesador. Note también que he habilitado como módulo a "Dell laptop support" que me permite monitorear la temperatura y controlar la velocidad de los ventiladores.</p>
<div class="highlight"><pre><span></span>Processor type and features
[ ] Symmetric multi-processing support
    Processor family (Pentium M)
&lt;M&gt; Dell laptop support
</pre></div>


<p>Habilito las características de ahorro de energía y de variación de la frecuencia del procesador.</p>
<div class="highlight"><pre><span></span>Power management and ACPI options
CPU Frequency scaling
[*] CPU Frequency scaling
[*]   Enable CPUfreq debugging
&lt;*&gt;   CPU frequency translation statistics
[*]     CPU frequency translation statistics details
       Default CPUFreq governor (ondemand)
-*-   &#39;performance&#39; governor
&lt;*&gt;   &#39;powersave&#39; governor
&lt;*&gt;   &#39;userspace&#39; governor for userspace frequency scaling
-*-   &#39;ondemand&#39; cpufreq policy governor
&lt;*&gt;   &#39;conservative&#39; cpufreq governor
      *** CPUFreq processor drivers ***
&lt;*&gt;   ACPI Processor P-States driver
</pre></div>


<p>Esta portátil tiene una ranura <em>PCMCIA</em> con la cual conecto una segunda tarjeta inalámbrica con chip <em>Atheros</em>.</p>
<div class="highlight"><pre><span></span>Bus options (PCI etc.)
&lt;M&gt; PCCard (PCMCIA/CardBus) support
&lt;M&gt;   16-bit PCMCIA support
[*]     Load CIS updates from userspace (EXPERIMENTAL)
[*]     PCMCIA control ioctl (obsolete)
-*-   32-bit CardBus support
*** PC-card bridges ***
&lt;M&gt;   CardBus yenta-compatible bridge support
</pre></div>


<p>Deshabilito el soporte para <em>IPv6</em> ya que en la práctica no he tenido necesidad de usarlo. Habilito las opciones para <em>IP Tables</em> que me permiten configurar un <em>muro de fuego</em>.</p>
<div class="highlight"><pre><span></span>Networking support ---&gt;
&lt; &gt;   The IPv6 protocol
[*] Network packet filtering framework (Netfilter) ---&gt;
[ ]   Advanced netfilter configuration
Core Netfilter Configuration ---&gt;
-*- Netfilter LOG over NFNETLINK interface
&lt;*&gt; Netfilter connection tracking support
[*]   Connection tracking security mark support
&lt;*&gt;   FTP protocol support
&lt;*&gt;   IRC protocol support
&lt;*&gt;   SIP protocol support
&lt;*&gt;   Connection tracking netlink interface
-*- Netfilter Xtables support (required for ip_tables)
&lt;*&gt;   &quot;CONNSECMARK&quot; target support
&lt;*&gt;   &quot;MARK&quot; target support
&lt;*&gt;   &quot;NFLOG&quot; target support
&lt;*&gt;   &quot;SECMARK&quot; target support
&lt;*&gt;   &quot;TCPMSS&quot; target support
&lt;*&gt;   &quot;conntrack&quot; connection tracking match support
&lt;*&gt;   &quot;mark&quot; match support
&lt;*&gt;   &quot;state&quot; match support
IP: Netfilter Configuration ---&gt;
&lt;*&gt; IPv4 connection tracking support (required for NAT)
[*]   proc/sysctl compatibility with old connection tracking
&lt;*&gt; IP tables support (required for filtering/masq/NAT)
&lt;*&gt;   Packet filtering
&lt;*&gt;     REJECT target support
&lt;*&gt;   LOG target support
&lt;*&gt;   ULOG target support
&lt;*&gt;   Full NAT
&lt;*&gt;     MASQUERADE target support
&lt;*&gt;   Packet mangling
</pre></div>


<p>Tengo una llave <em>bluetooth</em> que conecto por USB.</p>
<div class="highlight"><pre><span></span>Networking support ---&gt;
--- Bluetooth subsystem support
&lt;M&gt;   L2CAP protocol support
&lt;M&gt;   SCO links support
&lt;M&gt;   RFCOMM protocol support
[*]     RFCOMM TTY support
&lt;M&gt;   BNEP protocol support
[*]     Multicast filter support
[*]     Protocol filter support
&lt;M&gt;   HIDP protocol support
      Bluetooth device drivers  ---&gt;
      &lt;M&gt; HCI USB driver
</pre></div>


<p>Tanto el disco duro como el lector de DVD funcionan bajo <em>SATA</em>. Opciones que habilito.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
&lt;*&gt; Serial ATA (prod) and Parallel ATA (experimental) drivers  ---&gt;
[*]   ATA ACPI Support
[*]   SATA Port Multiplier support
&lt;*&gt;   AHCI SATA support
[*]   ATA SFF support
&lt;*&gt;     Intel ESB, ICH, PIIX3, PIIX4 PATA/SATA support
</pre></div>


<p>Habilito mis dispositivos de red: la alámbrica (Broadcom 440x/47xx), la inalámbrica (Intel PRO/Wireless 2200BG) y la inalámbrica PCMCIA (Atheros 5xxx).</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
[*] Network device support  ---&gt;
[*]   Ethernet (10 or 100Mbit)  ---&gt;
&lt;*&gt;   Broadcom 440x/47xx ethernet support
    Wireless LAN  ---&gt;
[*] Wireless LAN (IEEE 802.11)
&lt;M&gt;   Atheros 5xxx wireless cards support
&lt;M&gt;   Intel PRO/Wireless 2200BG and 2915ABG Network Connection
[*]     Enable promiscuous mode
-*-       Enable radiotap format 802.11 raw packet support
[*]       Enable creation of a RF radiotap promiscuous interface
[*]     Enable QoS support
</pre></div>


<p>Dentro de "Input device support" se encuentra "User level driver support" un módulo que me permite usar el <a href="http://es.wikipedia.org/wiki/Wiimote con la computadora">Wiimote</a>.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
Input device support  ---&gt;
-*- Generic input layer (needed for keyboard, mouse, ...)
-*-   Support for memoryless force-feedback devices
&lt;*&gt;   Polled input device skeleton
-*-   Mouse interface
&lt;M&gt;   Joystick interface
&lt;*&gt;   Event interface
-*-   Keyboards  ---&gt;
[*]   Mice  ---&gt;
[*]   Joysticks/Gamepads  ---&gt;
[ ]   Tablets  ---&gt;
[ ]   Touchscreens  ---&gt;
[*]   Miscellaneous devices  ---&gt;
      &lt;M&gt;   User level driver support
</pre></div>


<p>Habilito el soporte <em>I2C</em> para el chip <em>Intel 82801</em> presente en la Dell Inspiron 9300.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
-*- I2C support  ---&gt;
&lt;*&gt;   I2C device interface
[*]   Autoselect pertinent helper modules
      I2C Hardware Bus support  ---&gt;
      &lt;*&gt; Intel 82801 (ICH)
</pre></div>


<p>Mi portátil tiene una tarjeta de video <em>ATI Radeon Mobility X300 (M22)</em> la cual <em>no</em> es de alto desempeño gráfico. Me ha satisfecho el controlador libre, mismo que se configura en el kernel.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
Graphics support  ---&gt;
&lt;*&gt; /dev/agpgart (AGP Support)  ---&gt;
&lt;*&gt;   ATI chipset support
&lt;*&gt; Direct Rendering Manager (XFree86 4.1.0 and higher DRI support)
&lt;*&gt;   ATI Radeon
[*] Backlight &amp; LCD device support  ---&gt;
&lt;*&gt;   Lowlevel Backlight controls
&lt;*&gt;     Generic (aka Sharp Corgi) Backlight Driver
</pre></div>


<p>El dispositivo de sonido de esta portátil es <em>Intel AC97</em>.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
&lt;*&gt; Sound card support  ---&gt;
&lt;M&gt;   Advanced Linux Sound Architecture  ---&gt;
&lt;M&gt;   Sequencer support
&lt;M&gt;     Sequencer dummy client
&lt;M&gt;   OSS Mixer API
&lt;M&gt;   OSS PCM (digital audio) API
[*]     OSS PCM (digital audio) API - Include plugin system
[*]   OSS Sequencer API
[*]   Dynamic device file minor numbers
[*]   Support old ALSA API
[*]   Verbose procfs contents
[*]   Generic sound devices  ---&gt;
      [*]   AC97 Power-Saving Mode
      (0)     Default time-out for AC97 power-save mode
[*]   PCI sound devices  ---&gt;
      &lt;M&gt;   Intel/SiS/nVidia/AMD/ALi AC97 Controller
</pre></div>


<p>Es indispensable el soporte <em>USB</em>. Una opción que recomiendo activar es "USB selective suspend/resume and wakeup" que permite al equipo portátil ahorrar energía en lo que a dispositivos USB se refiere.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
[*] USB support  ---&gt;
&lt;*&gt;   Support for Host-side USB
[*]     USB verbose debug messages
[*]     USB announce new devices
[*]     USB device filesystem
[*]     USB selective suspend/resume and wakeup
&lt;*&gt;     USB Monitor
&lt;*&gt;     EHCI HCD (USB 2.0) support
&lt;*&gt;     OHCI HCD support
&lt;*&gt;     UHCI HCD (most Intel and VIA) support
&lt;M&gt;   USB Modem (CDC ACM) support
&lt;*&gt;   USB Printer support
&lt;*&gt;   USB Mass Storage support
[*]   The shared table of common (or usual) storage devices
</pre></div>


<p>Habilito el controlador del lector de tarjetas <em>SD</em>.</p>
<div class="highlight"><pre><span></span>Device Drivers ---&gt;
&lt;M&gt; MMC/SD/SDIO card support  ---&gt;
&lt;M&gt;   MMC block device driver
[*]     Use bounce buffer for simple hosts
&lt;M&gt;   Secure Digital Host Controller Interface support
&lt;M&gt;     SDHCI support on PCI bus
&lt;M&gt;       Ricoh MMC Controller Disabler  (EXPERIMENTAL)
</pre></div>


<p>Luego de haber habilitado los dispositivos de red, regreso a habilitar las opciones de "Wireless" en "Networking support".</p>
<div class="highlight"><pre><span></span>[*] Networking support  ---&gt;
[*]   Wireless  ---&gt;
{M}   Improved wireless configuration API
[ ]     cfg80211 regulatory debugging
[*]     nl80211 new netlink interface support
[*]   Old wireless static regulatory definitions
-*-   Wireless extensions
[*]     Wireless extensions sysfs files
{M}   Common routines for IEEE802.11 drivers
[ ]   lib80211 debugging messages
&lt;M&gt;   Generic IEEE 802.11 Networking Stack (mac80211)
[*]     Enable mac80211 mesh networking (pre-802.11s) support
-*-     Enable LED triggers
[ ]     Export mac80211 internals in DebugFS
</pre></div>


<p>La sección "File systems" es sumamente importante. Sencillamente, si se intenta cargar un GNU/Linux desde una partición con un sistema de archivos no soportado, nos ocasionaría un <em>kernel panic</em>. Note que aquí aparece el nuevo sistema de archivos <em>Btrfs</em>.</p>
<div class="highlight"><pre><span></span>File systems  ---&gt;
&lt;*&gt; Second extended fs support
&lt;*&gt; Ext3 journalling file system support
&lt;*&gt; Reiserfs support
&lt; &gt; Btrfs filesystem (EXPERIMENTAL) Unstable disk format
[*] Dnotify support
[*] Inotify file change notification support
[*]   Inotify support for userspace
[*] Quota support
[*]   Report quota messages through netlink interface
&lt;*&gt; Quota format v2 support
&lt;*&gt; Kernel automounter version 4 support (also supports v3)
    CD-ROM/DVD Filesystems  ---&gt;
    &lt;*&gt; ISO 9660 CDROM file system support
    [*]   Microsoft Joliet CDROM extensions
    [*]   Transparent decompression extension
    DOS/FAT/NT Filesystems  ---&gt;
    &lt;*&gt; MSDOS fs support
    &lt;*&gt; VFAT (Windows-95) fs support
    Pseudo filesystems  ---&gt;
    -*- /proc file system support
    [*]   /proc/kcore support
    [*]   /proc/vmcore support (EXPERIMENTAL)
    [*] Virtual memory file system support (former shm fs)
    [*]   Tmpfs POSIX Access Control Lists
    [*] HugeTLB file system support
[*] Network File Systems  ---&gt;
    &lt;*&gt;   CIFS support (advanced network filesystem, SMBFS successor)
    Partition Types  ---&gt;
    [ ] Advanced partition selection
-*- Native language support  ---&gt;
    (utf8) Default NLS Option
    &lt;*&gt;   Codepage 437 (United States, Canada)
    &lt;*&gt;   ASCII (United States)
    &lt;*&gt;   NLS ISO 8859-1  (Latin 1; Western European Languages)
    &lt;*&gt;   NLS UTF-8
</pre></div>


<p>Es necesario habilitar las siguientes opciones para usar redes <em>WiFi</em> cifradas como <em>WEP</em> y <em>WPA</em>.</p>
<div class="highlight"><pre><span></span>-*- Cryptographic API  ---&gt;
      *** Crypto core or helper ***
-*-   Cryptographic algorithm manager
&lt;*&gt;   Authenc support
      *** Block modes ***
&lt;*&gt;   CBC support
{*}   ECB support
      *** Hash modes ***
&lt;*&gt;   HMAC support
-*-   MD5 digest algorithm
{M}   Michael MIC keyed digest algorithm
&lt;*&gt;   SHA1 digest algorithm
      *** Ciphers ***
-*-   AES cipher algorithms
&lt;*&gt;   AES cipher algorithms (i586)
{*}   ARC4 cipher algorithm
&lt;*&gt;   DES and Triple DES EDE cipher algorithms
      *** Random Number Generation ***
[ ]   Hardware crypto devices  ---&gt;
</pre></div>


<p>Para terminar, vaya a la pantalla inicial de la configuración y elija <em>Exit</em>.</p>
<p>Le preguntará <em>Do you wish to save your new kernel configuration?</em> a lo que debemos responder <em>YES</em> de lo contrario perderemos todos los cambios hechos.</p>
<h3>Compilar</h3>
<p>De vuelta en la terminal, ejecutamos <em>make</em> para compilar.</p>
<div class="highlight"><pre><span></span># make
</pre></div>


<h3>Instalar</h3>
<p>El siguiente paso en instalar los <em>módulos</em>. Si hubiera una instalación de esta misma verisón del kernel hay que eliminar los módulos anteriores antes de instalar los nuevos.</p>
<div class="highlight"><pre><span></span># rm -rf /lib/modules/2.6.29-gentoo-r5
# make modules_install
</pre></div>


<p>Como tengo una partición para el arranque, la monto y elimino los archivos de alguna instalación anterior de esta misma versión del kernel.</p>
<div class="highlight"><pre><span></span># mount /boot
# rm /boot/config
# rm /boot/config-2.6.29-gentoo-r5
# rm /boot/System.map
# rm /boot/System.map-2.6.29-gentoo-r5
# rm /boot/vmlinuz
# rm /boot/vmlinuz-2.6.29-gentoo-r5
</pre></div>


<p>Ejecuto <em>make install</em> para que me copie <em>vmlinuz</em>, <em>System.map</em> y <em>config</em> a /boot</p>
<div class="highlight"><pre><span></span># make install
</pre></div>


<p>Edito la configuración del gestor de arranque <em>Grub</em> para tener la opción de este nuevo kernel.</p>
<div class="highlight"><pre><span></span># nano /boot/grub/grub.conf
</pre></div>


<p>Mi archivo <em>grub.conf</em> es así...</p>
<div class="highlight"><pre><span></span>#
# /boot/grub/grub.conf
#

default 0
timeout 3
splashimage=(hd0,0)/boot/grub/splash.xpm.gz

title Gentoo Linux - KDE 3.5.9 - 2.6.29-r5 NUEVO
root (hd0,0)
kernel /vmlinuz-2.6.29-gentoo-r5 root=/dev/sda7 resume=/dev/sda5
</pre></div>


<p>Puede necesitar cargar algunos módulos cada vez que arranque el equipo. Eso se configura en el archivo /etc/modules.autoload.d/kernel-2.6</p>
<div class="highlight"><pre><span></span># nano /etc/modules.autoload.d/kernel-2.6
</pre></div>


<p>En /etc/modules.autoload.d/kernel-2.6 tengo:</p>
<div class="highlight"><pre><span></span># Dell Inspiron, monitor temperatura y ventiladores
i8k

# Tarjeta PCMCIA
yenta_socket

# Lector de tarjetas SD
mmc_core
ricoh_mmc

# Red inalámbrica Intel IPW2200
ipw2200

# WiiMote
uinput
</pre></div>


<p>La configuración de la tarjeta de sonido reside en el archivo /etc/modprobe.d/alsa</p>
<div class="highlight"><pre><span></span># nano /etc/modprobe.d/alsa
</pre></div>


<p>Y lo tengo con este contenido apropiado para la <em>Intel AC97</em>...</p>
<div class="highlight"><pre><span></span>#
# /etc/modprobe.d/alsa
#

# ALSA portion
alias char-major-116 snd
# OSS/Free portion
alias char-major-14 soundcore

#
# Intel AC97
#
# ALSA portion
alias snd-card-0 snd-intel8x0
# OSS/Free portion
alias sound-slot-0 snd-card-0

# OSS/Free portion - card #1
alias sound-service-0-0 snd-mixer-oss
alias sound-service-0-1 snd-seq-oss
alias sound-service-0-3 snd-pcm-oss
alias sound-service-0-8 snd-seq-oss
alias sound-service-0-12 snd-pcm-oss

alias /dev/mixer snd-mixer-oss
alias /dev/dsp snd-pcm-oss
alias /dev/midi snd-seq-oss

# Set this to the correct number of cards.
options snd cards_limit=1
</pre></div>


<p>Después de modificar estos archivos refresque los módulos a cargar con <em>update-modules</em>.</p>
<div class="highlight"><pre><span></span># update-modules
</pre></div>


<p>Reinicie el equipo y pruebe su kernel 2.6.29.</p>
<h3>Revisión del controlador ipw2200 <em>hackeado</em></h3>
<p>Para revisar la carga del controlador de la tarjeta inalámbrica ipw2200 ejecute...</p>
<div class="highlight"><pre><span></span>$ dmesg <span class="p">|</span> grep ipw
</pre></div>


<p>Si aparece "Detected geography ZZR (14 802.11bg channels, 0 802.11a channels)" tendrá su controlador <em>hackeado</em>.</p>
<div class="highlight"><pre><span></span>$ dmesg <span class="p">|</span> grep ipw
<span class="o">[</span>    <span class="m">4</span>.641026<span class="o">]</span> ipw2200: Intel<span class="o">(</span>R<span class="o">)</span> PRO/Wireless <span class="m">2200</span>/2915 Network Driver, <span class="m">1</span>.2.2kmprq
<span class="o">[</span>    <span class="m">4</span>.641029<span class="o">]</span> ipw2200: Copyright<span class="o">(</span>c<span class="o">)</span> <span class="m">2003</span>-2006 Intel Corporation
<span class="o">[</span>    <span class="m">4</span>.641090<span class="o">]</span> ipw2200 <span class="m">0000</span>:03:03.0: PCI INT A -&gt; GSI <span class="m">17</span> <span class="o">(</span>level, low<span class="o">)</span> -&gt; IRQ <span class="m">17</span>
<span class="o">[</span>    <span class="m">4</span>.663652<span class="o">]</span> ipw2200: Detected Intel PRO/Wireless 2200BG Network Connection
<span class="o">[</span>    <span class="m">4</span>.663693<span class="o">]</span> eth1 <span class="o">(</span>ipw2200<span class="o">)</span>: not using net_device_ops yet
<span class="o">[</span>    <span class="m">4</span>.663697<span class="o">]</span> ipw2200 <span class="m">0000</span>:03:03.0: firmware: requesting ipw2200-bss.fw
<span class="o">[</span>    <span class="m">5</span>.121085<span class="o">]</span> ipw2200: Detected geography ZZR <span class="o">(</span><span class="m">14</span> <span class="m">802</span>.11bg channels, <span class="m">0</span> <span class="m">802</span>.11a channels<span class="o">)</span>
</pre></div>


<p>Otra forma de comprobar esto es ejecutando <em>iwlist <em>dispositivo</em> channel</em>:</p>
<div class="highlight"><pre><span></span># iwlist eth1 channel
eth1      14 channels in total; available frequencies :
    Channel 01 : 2.412 GHz
    Channel 02 : 2.417 GHz
    Channel 03 : 2.422 GHz
    Channel 04 : 2.427 GHz
    Channel 05 : 2.432 GHz
    Channel 06 : 2.437 GHz
    Channel 07 : 2.442 GHz
    Channel 08 : 2.447 GHz
    Channel 09 : 2.452 GHz
    Channel 10 : 2.457 GHz
    Channel 11 : 2.462 GHz
    Channel 12 : 2.467 GHz
    Channel 13 : 2.472 GHz
    Channel 14 : 2.484 GHz
    Current Frequency=2.412 GHz (Channel 1)
</pre></div>


<p>Le deseo un desempeño exitoso en su nuevo kernel.</p>
    </article>
            </div>
            <div class="col-md-4">

                <div class="card my-4">
                    <h5 class="card-header">A cerca de Movimiento Libre</h5>
                    <div class="card-body">
                        Es un sitio web que busca divulgar conocimiento
                        y promover el uso de software libre. Su creador
                        es reconocido por ser un desarrollador que
                        fabrica estas herramientas tanto para entidades
                        públicas como privadas. Le invito a conocer el
                        portafolio:
                        <ul>
                            <li><a href="http://www.movimientolibre.com/portafolio/soluciones/">Soluciones en software a la medida</a></li>
                            <li>Plataformas web</li>
                            <li>Instalación y mantenimiento de sistemas operativos libres en servidores</li>
                        </ul>
                    </div>
                </div>

                <div class="card my-4">
                    <h5 class="card-header">Etiquetas</h5>
                    <div class="card-body">
                        <ul class="list-unstyled mb-0">
                            <li><a href="http://www.movimientolibre.com/tag/astronomia.html">astronomía</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/centos.html">centos</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/ciencia-de-datos.html">ciencia de datos</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/conferencias.html">conferencias</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/desarrollo.html">desarrollo</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/educacion.html">educación</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/fedora.html">fedora</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/flisol.html">flisol</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/gentoo-linux.html">gentoo linux</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/git.html">git</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/gnu-linux.html">gnu linux</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/gulag.html">gulag</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/hardware.html">hardware</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/kde.html">kde</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/kernel-linux.html">kernel linux</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/latex.html">latex</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/markdown.html">markdown</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/openstreetmap.html">openstreetmap</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/php.html">php</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/politica.html">política</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/postgresql.html">postgresql</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/ruby.html">ruby</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/servidores.html">servidores</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/software-libre.html">software libre</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/vida-cotidiana.html">vida cotidiana</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/virtualizacion.html">virtualización</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/wallpapers.html">wallpapers</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/xfce4.html">xfce4</a></li>
                        </ul>
                    </div>
                </div>            </div>
        </div>
    </div>

    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="copyright text-muted">
                Copyright &copy; 2006-2018 Guillermo Valdés Lozano.<br>
                Se otorga permiso para copiar, distribuir y/o modificar estos documentos.
                Protegidos por la licencia <a href="http://www.movimientolibre.com/licencias/gfdl-es/">GFDL</a>.<br>
                Sitio web elaborado con <a href="http://getpelican.com/">Pelican</a>,
                que es programado en <a href="http://python.org/">Python</a>.
                Tema <a href="https://startbootstrap.com/template-overviews/blog-post/">Blog post</a>
                creado por <a href="https://startbootstrap.com/">Start Bootstrap</a>.
            </p>
        </div>
    </footer>

    <script src="http://www.movimientolibre.com/theme/vendor/jquery/jquery.min.js"></script>
    <script src="http://www.movimientolibre.com/theme/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>