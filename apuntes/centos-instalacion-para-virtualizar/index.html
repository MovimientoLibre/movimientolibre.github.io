<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="Pelican Static Site Generator, Powered by Python">
    <meta name="description" content="Instalar CentOS con lo mínimo necesario para virtualizar con KVM. Teniendo en mente que sólo va a llegar a Terminal, es decir, sin interfaz gráfica o GUI. La administración será vía OpenSSH y por el Administrador de Virtualizaciones desde otro equipo.">
    <meta name="keywords" content="software libre, apuntes">
    <meta name="author" content="Guillermo Valdés Lozano (guivaloz)">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@guivaloz">
    <meta name="twitter:title" content="Instalación de CentOS para virtualizar">
    <meta name="twitter:description" content="Instalar CentOS con lo mínimo necesario para virtualizar con KVM. Teniendo en mente que sólo va a llegar a Terminal, es decir, sin interfaz gráfica o GUI. La administración será vía OpenSSH y por el Administrador de Virtualizaciones desde otro equipo.">
    <meta name="twitter:image" content="https://movimientolibre.com/apuntes/centos-instalacion-para-virtualizar/centos-logo-icon.png">
    <meta property="og:title" content="Instalación de CentOS para virtualizar">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://movimientolibre.com/apuntes/centos-instalacion-para-virtualizar/">
    <meta property="og:image" content="https://movimientolibre.com/apuntes/centos-instalacion-para-virtualizar/centos-logo-icon.png">
    <meta property="og:description" content="Instalar CentOS con lo mínimo necesario para virtualizar con KVM. Teniendo en mente que sólo va a llegar a Terminal, es decir, sin interfaz gráfica o GUI. La administración será vía OpenSSH y por el Administrador de Virtualizaciones desde otro equipo.">
    <meta property="og:site_name" content="Movimiento Libre">
    <title>Instalación de CentOS para virtualizar - Movimiento Libre</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://movimientolibre.com/favicon.ico">
    <link rel="icon" href="https://movimientolibre.com/theme/images/icon-hires.png" sizes="192x192">
    <link rel="icon" href="https://movimientolibre.com/theme/images/icon-normal.png" sizes="128x128">
    <link rel="apple-touch-icon" href="https://movimientolibre.com/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" href="https://movimientolibre.com/theme/images/apple-touch-icon-76x76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="https://movimientolibre.com/theme/images/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="https://movimientolibre.com/theme/images/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="https://movimientolibre.com/theme/images/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="alternate" href="https://movimientolibre.com/feeds/all.rss.xml" type="application/rss+xml" title="Movimiento Libre Full RSS Feed" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74263253-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-74263253-1');
    </script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap">
    <link rel="stylesheet" href="https://movimientolibre.com/theme/css/movimiento-libre.css">
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-light fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="https://movimientolibre.com/"><i class="fa fa-home"></i></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navBootstrap4" aria-controls="navBootstrap4" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navBootstrap4">
                <ul class="navbar-nav mr-auto">
                    <li><a class="nav-link" href="https://movimientolibre.com/category/apuntes.html">Apuntes</a></li>
                    <li><a class="nav-link" href="https://movimientolibre.com/category/articulos.html">Artículos</a></li>
                    <li><a class="nav-link" href="https://movimientolibre.com/category/presentaciones.html">Presentaciones</a></li>
                    <li><a class="nav-link" href="https://movimientolibre.com/portafolio/contacto/index.html">Contacto</a></li>
                </ul>
                <ul class="navbar-nav movimientolibre-navbar-icons">
                    <li><a class="movimientolibre-navbar-icon-link" href="https://twitter.com/guivaloz/" target="_blank"><i class="fab fa-twitter-square"></i></a></li>
                    <li><a class="movimientolibre-navbar-icon-link" href="https://www.facebook.com/movimientolibrepuntocom/" target="_blank"><i class="fab fa-facebook-square"></i></a></li>
                    <li><a class="movimientolibre-navbar-icon-link" href="https://github.com/guivaloz" target="_blank"><i class="fab fa-github-square"></i></a></li>
                    <li><a class="movimientolibre-navbar-icon-link" href="https://movimientolibre.com/feeds/all.rss.xml"><i class="fa fa-rss-square"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <header>
            <div class="jumbotron head-welcome" itemscope itemtype="http://schema.org/Organization">
                <h1 class="jumbotron-heading head-site-name" itemprop="name">Movimiento Libre</h1>
                <p class="head-site-description" itemprop="description">Plataforma de divulgación de conocimiento libre por Ing. Guillermo Valdés Lozano (guivaloz)</p>
            </div>
        </header>
        <div class="row">
            <div class="col-md-8">
                <article class="article-post">
                    <script type="application/ld+json">
                        {
                            "@context": "http://schema.org",
                            "@type": "Article",
                            "publisher": {
                                "@type": "Organization",
                                "name": "Movimiento Libre",
                                "logo": {
                                    "@type": "ImageObject",
                                    "url": "https://movimientolibre.com/theme/images/movimientolibre.png"
                                },
                                "url": "https://movimientolibre.com"
                            },
                            "author": "Guillermo Valdés Lozano (guivaloz)",
                            "name": "Instalación de CentOS para virtualizar",
                            "headline": "Instalación de CentOS para virtualizar",
                            "description": "Instalar CentOS con lo mínimo necesario para virtualizar con KVM. Teniendo en mente que sólo va a llegar a Terminal, es decir, sin interfaz gráfica o GUI. La administración será vía OpenSSH y por el Administrador de Virtualizaciones desde otro equipo.",
                            "dateCreated": "2014-01-30 10:20:00-06:00",
                            "datePublished": "2014-01-30 10:20:00-06:00",
                            "dateModified": "2014-01-30 10:20:00-06:00",
                            "image": "https://movimientolibre.com/apuntes/centos-instalacion-para-virtualizar/centos-logo-icon.png",
                            "url": "https://movimientolibre.com/apuntes/centos-instalacion-para-virtualizar/"
                        }
                    </script>
                    <h2 class="article-post-title">Instalación de CentOS para virtualizar</h2>
<p>Instalar CentOS con lo mínimo necesario para virtualizar con KVM. Teniendo en mente que sólo va a llegar a Terminal, es decir, sin interfaz gráfica o GUI. La administración será vía OpenSSH y por el Administrador de Virtualizaciones desde otro equipo.</p>
                    <p class="article-post-meta">30 enero 2014</p>
<p><a href="https://www.centos.org/">CentOS</a> es una distribución GNU/Linux mantenida por la comunidad a partir del código libre de <a href="https://www.redhat.com/">Red Hat</a>. De una forma práctica, <strong>CentOS</strong> es lo mismo que <strong>Red Hat</strong> pero sin su marca comercial ni soporte técnico de paga. La estabilidad y confiabilidad de CentOS lo hacen la mejor opción para sistema operativo base de un servidor cuyo fin sea virtualizar. Recientemente se ha anunciado el apoyo directo de Red Hat a la comunidad de CentOS; de lo cual esperamos muchas ganancias para todos.</p>
<h3>Objetivo</h3>
<p>Instalar CentOS con lo mínimo necesario para virtualizar con KVM. Teniendo en mente que sólo va a llegar a Terminal, es decir, sin interfaz gráfica o <em>GUI</em>. La administración será vía <strong>OpenSSH</strong> y por el <strong>Administrador de Virtualizaciones</strong> desde otro equipo.</p>
<h3>Requerimientos</h3>
<ul>
<li>Una computadora o servidor con capacidad para virtualizar en hardware. Consulte el sitio del <a href="http://www.linux-kvm.org/page/Main_Page">KVM</a> para saber más.</li>
<li>Un mínimo de 2 GB de RAM.</li>
<li>Disco duro dedicado de por lo menos 100 GB.</li>
<li>Descargar y quemar el CD Minimal de <a href="https://www.centos.org/">CentOS</a>.</li>
</ul>
<h3>Arranque con el CD Minimal</h3>
<p>Hay varios tipos de discos ISO de CentOS para cada versión. Desde DVD completos a CD para instarar por red. Su servidor recomienda usar el <strong>CD Minimal x86_64</strong> ya que contiene lo básico para llegar a una terminal. Considere que es poco útil y riesgoso tener una interfaz gráfica en un servidor.</p>
<p>Durante la instalación elija estas opciones:</p>
<ul>
<li>GRUB: Install or Update</li>
<li>Idioma: Spanish</li>
<li>Teclado: Latinoamericano</li>
<li>Special Storage Devices</li>
<li>Use All Space</li>
</ul>
<p>Ya que haga su primer arranque, a partir de lo instalado en el disco duro, continúe con los siguientes pasos.</p>
<h3>Levante la red</h3>
<p>Por defecto no levanta ningún dispositivo de red. Como partimos del <strong>CD Minimal</strong> necesitaremos salida a internet para bajar el software. Para configurar el dispositivo de red <strong>eth0</strong> edite:</p>
<div class="highlight"><pre><span></span><code><span class="err"># cd /etc/sysconfig/network-scripts</span>
<span class="err"># vi ifcfg-eth0</span>
</code></pre></div>


<p>Si quiere usar una <strong>dirección IP fija</strong>, por ejemplo 192.168.0.250 con ruteador 192.168.0.254 (conserve el <strong>HWADDR</strong>):</p>
<div class="highlight"><pre><span></span><code><span class="err">DEVICE=eth0</span>
<span class="err">HWADDR=xx:xx:xx:xx:xx:xx</span>
<span class="err">TYPE=Ethernet</span>
<span class="err">ONBOOT=yes</span>
<span class="err">NM_CONTROLLED=no</span>
<span class="err">IPADDR=192.168.0.250</span>
<span class="err">NETMASK=255.255.255.0</span>
<span class="err">GATEWAY=192.168.0.254</span>
</code></pre></div>


<p>Luego debe configurar cuáles serán sus servidores DNS:</p>
<div class="highlight"><pre><span></span><code><span class="err">vi /etc/resolv.conf</span>
</code></pre></div>


<p>Escriba el dominio si lo usa, luego cada servidor DNS como una línea <em>nameserver</em>. En el siguiente ejemplo se usa un dominio <em>oficina.lan</em> y las direcciones IP de los <a href="https://developers.google.com/speed/public-dns/?hl=es-">DNS de Google</a>:</p>
<div class="highlight"><pre><span></span><code><span class="err">domain oficina.lan</span>
<span class="err">search oficina.lan</span>
<span class="err">nameserver 8.8.8.8</span>
<span class="err">nameserver 8.8.4.4</span>
</code></pre></div>


<p>En cambio, para solicitar una <strong>dirección IP dinámica</strong> al servidor DHCP se usa <strong>BOOTPROTO</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">DEVICE=eth0</span>
<span class="err">HWADDR=xx:xx:xx:xx:xx:xx</span>
<span class="err">TYPE=Ethernet</span>
<span class="err">ONBOOT=yes</span>
<span class="err">NM_CONTROLLED=no</span>
<span class="err">BOOTPROTO=dhcp</span>
</code></pre></div>


<p>Después de cambiar estos archivos de configuración, reinicie el servicio de red para hacerlos efectivos.</p>
<div class="highlight"><pre><span></span><code><span class="err"># service network restart</span>
</code></pre></div>


<p>Revise la dirección IP obtenida con:</p>
<div class="highlight"><pre><span></span><code><span class="err"># ifconfig eth0</span>
</code></pre></div>


<p>Revise la tabla de ruteo también:</p>
<div class="highlight"><pre><span></span><code><span class="err"># route -n</span>
</code></pre></div>


<h3>Configure proxy de ser necesario</h3>
<p>En caso de tener internet a través de un <em>proxy</em> debe de editar el archivo de configuración de <strong>Yum</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err"># vi /etc/yum.conf</span>
</code></pre></div>


<p>Agregue una línea como la siguiente para definir el servidor <em>proxy</em>. Cambie <em>proxy.oficina.lan</em> por el nombre o dirección IP del <em>proxy</em>.</p>
<div class="highlight"><pre><span></span><code><span class="err">proxy=http://proxy.oficina.lan:3128</span>
</code></pre></div>


<h3>Actualize e instale el software para virtualizar</h3>
<p>Ejecute estos dos comandos para actualizar las listas de los repositorios de CentOS:</p>
<div class="highlight"><pre><span></span><code><span class="err"># yum check-update</span>
<span class="err"># yum update</span>
</code></pre></div>


<p>Por ser programas indispensables, instale <strong>nano</strong>, <strong>sudo</strong> y <strong>man</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err"># yum install nano sudo man</span>
</code></pre></div>


<p>Yum ofrece la instalación por <strong>grupos</strong>, éstos son conjuntos de paquetes de software. Para listar los <strong>grupos</strong> ejecute este comando:</p>
<div class="highlight"><pre><span></span><code><span class="err"># yum grouplist</span>
</code></pre></div>


<p>Instale los <strong>grupos</strong> de paquetes que tienen que ver con virtualización en servidor:</p>
<div class="highlight"><pre><span></span><code><span class="err"># yum groupinstall &quot;Virtualización&quot;</span>
<span class="err"># yum groupinstall &quot;Plataforma de virtualización&quot;</span>
<span class="err"># yum install tunctl</span>
</code></pre></div>


<p>Esta descarga es grande y puede demorar algo de tiempo, dependiendo de su velocidad de internet. Al terminar de instalar reinicie el servidor para asegurar que las actualizaciones y el nuevo software estén trabajando. Reinicie con:</p>
<div class="highlight"><pre><span></span><code><span class="err"># shutdown -r 1 &amp;</span>
<span class="err"># exit</span>
</code></pre></div>


<h3>Configuración del bridge</h3>
<p>Cree el archivo <strong>ifcfg-br0</strong> con la configuración para el <em>bridge</em>:</p>
<div class="highlight"><pre><span></span><code><span class="err"># cd /etc/sysconfig/network-scripts/</span>
<span class="err"># nano ifcfg-br0</span>
</code></pre></div>


<p>Si <strong>br0</strong> va a tener una dirección IP estática, use lo siguiente como contenido del archivo <strong>ifcfg-br0</strong> ajustando la dirección IP, la máscara y el <em>gateway</em> a sus necesidades:</p>
<div class="highlight"><pre><span></span><code><span class="err">DEVICE=br0</span>
<span class="err">TYPE=Bridge</span>
<span class="err">ONBOOT=yes</span>
<span class="err">DELAY=0</span>
<span class="err">NM_CONTROLLED=no</span>
<span class="err">IPADDR=192.168.0.250</span>
<span class="err">NETMASK=255.255.255.0</span>
<span class="err">GATEWAY=192.168.0.254</span>
</code></pre></div>


<p>Luego, hay que editar el archivo <strong>ifcfg-eth0</strong> para indicar que ese dispositivo de red se va conectar al <em>bridge</em>:</p>
<div class="highlight"><pre><span></span><code><span class="err"># nano ifcfg-eth0</span>
</code></pre></div>


<p>Con este contenido:</p>
<div class="highlight"><pre><span></span><code><span class="err">DEVICE=&quot;eth0&quot;</span>
<span class="err">HWADDR=&quot;xx:xx:xx:xx:xx:xx&quot;</span>
<span class="err">NM_CONTROLLED=&quot;no&quot;</span>
<span class="err">ONBOOT=&quot;yes&quot;</span>
<span class="err">BRIDGE=&quot;br0&quot;</span>
</code></pre></div>


<h3>Configure el muro de fuego</h3>
<p>Para que se permitan todas las comunicaciones que fluyan a través del <em>bridge</em> <strong>br0</strong> es necesario indicarlo. Edite la configuración del muro de fuego:</p>
<div class="highlight"><pre><span></span><code><span class="err"># cd /etc/sysconfig/</span>
<span class="err"># nano iptables</span>
</code></pre></div>


<p>Agregue la línea <strong>-A FORWARD -i br0 -j ACCEPT</strong> como la primer línea con <em>FORWARD</em>, por ejemplo:</p>
<div class="highlight"><pre><span></span><code><span class="err">*filter</span>
<span class="err">:INPUT ACCEPT [0:0]</span>
<span class="err">:FORWARD ACCEPT [0:0]</span>
<span class="err">:OUTPUT ACCEPT [0:0]</span>
<span class="err">-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span>
<span class="err">-A INPUT -p icmp -j ACCEPT</span>
<span class="err">-A INPUT -i lo -j ACCEPT</span>
<span class="err">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span>
<span class="err">-A INPUT -j REJECT --reject-with icmp-host-prohibited</span>
<span class="err">-A FORWARD -i br0 -j ACCEPT</span>
<span class="err">-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span>
<span class="err">COMMIT</span>
</code></pre></div>


<p>Reinicie el muro de fuego</p>
<div class="highlight"><pre><span></span><code><span class="err"># service iptables restart</span>
</code></pre></div>


<p>Verifique...</p>
<div class="highlight"><pre><span></span><code><span class="err"># iptables -L -v -n</span>
</code></pre></div>


<h3>Destruir el puente virbr0</h3>
<p>Como se va a levantar el <em>bridge</em> <strong>br0</strong> desde el sistema operativo, sale sobrando el puente que por defecto habilita <strong>libvirt</strong>. Para observar que esta presente <strong>virtbr0</strong> ejecute:</p>
<div class="highlight"><pre><span></span><code><span class="err"># ifconfig</span>
</code></pre></div>


<p>Notará que hay un dispositivo <strong>virbr0</strong> con una dirección IP indpenediente (p.e. 192.168.122.1). El comando <strong>virsh net-list</strong> mostrará las redes para las virtualizaciones:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-list</span>
<span class="err">Nombre               Estado     Inicio automático Persistente</span>
<span class="err">--------------------------------------------------</span>
<span class="err">default              activo     si            si</span>
</code></pre></div>


<p>Para destruir la red <strong>default</strong> ejecute:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-destroy default</span>
<span class="err"># virsh net-undefine default</span>
</code></pre></div>


<p>Revise:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-list</span>
<span class="err"># ifconfig</span>
</code></pre></div>


<h3>Reinicie el servidor</h3>
<p>Para asegurar que las actualizaciones y configuraciones inicien al encender, reinicie el servidor.</p>
<div class="highlight"><pre><span></span><code><span class="err"># shutdown -r 1 &amp;</span>
<span class="err"># exit</span>
</code></pre></div>


<p>Y revise que los dispositivos de red y los servicios estén trabajando como debe.</p>
<div class="highlight"><pre><span></span><code><span class="err"># ifconfig br0</span>
<span class="err"># ifconfig eth0</span>
<span class="err"># brctl show</span>
</code></pre></div>


<h3>Configurar libvirt para que use br0</h3>
<p>Para que las virtualizaciones usen el <em>bridge</em> del sistema operativo, cree un archivo de configuración <strong>xml</strong>. Use el nombre de archivo que guste:</p>
<div class="highlight"><pre><span></span><code><span class="err"># cd /root</span>
<span class="err"># nano bridge-br0.xml</span>
</code></pre></div>


<p>Escriba el siguiente contenido, cambiando <strong>bridge-br0</strong> por el nombre que usted prefiera:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;network&gt;</span>
  <span class="nt">&lt;name&gt;</span>bridge-br0<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;forward</span> <span class="na">mode=</span><span class="s">&quot;bridge&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;bridge</span> <span class="na">name=</span><span class="s">&quot;br0&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/network&gt;</span>
</code></pre></div>


<p>Para cargar ese archivo <strong>xml</strong> en <strong>libvirt</strong> ejecute...</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-define bridge-br0.xml</span>
<span class="err">La red bridge-br0 se encuentra definida desde bridge-br0.xml</span>
</code></pre></div>


<p><strong>Atención:</strong> En este momento, el comando <strong># virsh net-list</strong> NO mostrará esta red. En cambio, con el parámetro <strong>--all</strong> sí lo verá:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-list --all</span>
<span class="err">Nombre               Estado     Inicio automático</span>
<span class="err">-----------------------------------------</span>
<span class="err">bridge-br0           activo     no</span>
</code></pre></div>


<p>Puede solicitar información detallada de una red con el comando <strong>virsh net-info</strong> seguido por el nombre de la red.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># virsh net-info bridge-br0</span>
<span class="n">Nombre</span>          <span class="n">bridge</span><span class="o">-</span><span class="n">br0</span>
<span class="n">UUID</span>            <span class="n">xxxxxxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxxxxxxxxxx</span>
<span class="n">Activar</span><span class="p">:</span>        <span class="n">no</span>
<span class="n">Persistente</span><span class="p">:</span>    <span class="n">si</span>
<span class="n">Autoinicio</span><span class="p">:</span>     <span class="n">no</span>
<span class="n">Puente</span><span class="p">:</span>         <span class="n">br0</span>
</code></pre></div>


<p>Observe que Activar y Autoinicio están en <strong>no</strong>. Configure que esta red se habilite al inicio, con:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-autostart bridge-br0</span>
<span class="err">La red bridge-br0-dgspm ha sido marcada para iniciarse automáticamente</span>
</code></pre></div>


<p>Luego, arranque esta red con:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-start bridge-br0</span>
<span class="err">La red bridge-br0 se ha iniciado</span>
</code></pre></div>


<p>Verifique que Activar, Persistente y Autoinicio estén en <strong>si</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># virsh net-info bridge-br0</span>
<span class="n">Nombre</span>          <span class="n">bridge</span><span class="o">-</span><span class="n">br0</span>
<span class="n">UUID</span>            <span class="n">xxxxxxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxxxxxxxxxx</span>
<span class="n">Activar</span><span class="p">:</span>        <span class="n">si</span>
<span class="n">Persistente</span><span class="p">:</span>    <span class="n">si</span>
<span class="n">Autoinicio</span><span class="p">:</span>     <span class="n">si</span>
<span class="n">Puente</span><span class="p">:</span>         <span class="n">br0</span>
</code></pre></div>


<p>También con el comando <strong>virsh net-list</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err"># virsh net-list</span>
<span class="err">Nombre               Estado     Inicio automático Persistente</span>
<span class="err">--------------------------------------------------</span>
<span class="err">bridge-br0           activo     si            si</span>
</code></pre></div>


<p>En dado caso de que necesite recuperar la información de la red en formato <strong>xml</strong>, use el comando <strong>virsh net-dumpxml</strong>:</p>
<div class="highlight"><pre><span></span><code># virsh net-dumpxml bridge-br0
<span class="nt">&lt;network&gt;</span>
  <span class="nt">&lt;name&gt;</span>bridge-br0<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;uuid&gt;</span>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx<span class="nt">&lt;/uuid&gt;</span>
  <span class="nt">&lt;forward</span> <span class="na">mode=</span><span class="s">&#39;bridge&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;bridge</span> <span class="na">name=</span><span class="s">&#39;br0&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/network&gt;</span>
</code></pre></div>


<h3>Agregue un usuario común</h3>
<p>Como en todo equipo de escritorio o servidor, es ampliamente recomendable dar de alta un usuario común y no usar root para todo. Para dar de alta un usuario ejecute el comando <strong>useradd</strong> con los grupos a los que necesite pertenecer y cambie <em>minombre</em> por su nombre para ingresar.</p>
<div class="highlight"><pre><span></span><code><span class="err"># useradd -g users -G tty,lp,wheel,uucp,games,video,audio,cdrom,kvm,qemu -m minombre</span>
</code></pre></div>


<p>Establezca la contraseña:</p>
<div class="highlight"><pre><span></span><code><span class="err"># passwd minombre</span>
</code></pre></div>


<h3>Administrador de virtualizaciones</h3>
<p>Desde un equipo con interfaz gráfica y el <strong>VirtManager</strong> instalado administramos las virtaliuzaciones.</p>
<p><img class="img-fluid" src="administrador-virtualizaciones-1.png" alt="Administrador de Virtualizaciones"></p>
<p>Establezca la conexión vía OpenSSH. Le solicitará la contraseña <em>root</em>:</p>
<p><img class="img-fluid" src="administrador-virtualizaciones-2-nueva-conexion.png" alt="Administrador de Virtualizaciones nueva conexion"></p>
<p>Verifique que en los detalles se use la configuración de red con el <em>bridge</em> <strong>br0</strong>:</p>
<p><img class="img-fluid" src="administrador-virtualizaciones-3-detalles-redes.png" alt="Administrador de Virtualizaciones detalle"></p>
                </article>
            </div>
            <div class="col-md-4">
                <aside>
                    <div class="card my-4 movimientolibre-card aside-about">
                        <h5 class="card-header movimientolibre-card-header">A cerca de</h5>
                        <div class="card-body">
                            <p class="card-text">
                                Este es un sitio web que busca divulgar
                                conocimiento y promover el uso de software libre.
                                Su creador es reconocido como desarrollador que
                                fabrica estas herramientas tanto para entidades
                                públicas como privadas.
                            </p>
                        </div>
                    </div>
                    <div class="card my-4 movimientolibre-card">
                        <h5 class="card-header movimientolibre-card-header">Etiquetas</h5>
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li><a href="https://movimientolibre.com/tag/astronomia.html">astronomía</a></li>
                                <li><a href="https://movimientolibre.com/tag/ciencia-de-datos.html">ciencia de datos</a></li>
                                <li><a href="https://movimientolibre.com/tag/conferencias.html">conferencias</a></li>
                                <li><a href="https://movimientolibre.com/tag/contenedores.html">contenedores</a></li>
                                <li><a href="https://movimientolibre.com/tag/desarrollo.html">desarrollo</a></li>
                                <li><a href="https://movimientolibre.com/tag/educacion.html">educación</a></li>
                                <li><a href="https://movimientolibre.com/tag/fedora.html">fedora</a></li>
                                <li><a href="https://movimientolibre.com/tag/flisol.html">flisol</a></li>
                                <li><a href="https://movimientolibre.com/tag/gentoo-linux.html">gentoo linux</a></li>
                                <li><a href="https://movimientolibre.com/tag/git.html">git</a></li>
                                <li><a href="https://movimientolibre.com/tag/gnu-linux.html">gnu linux</a></li>
                                <li><a href="https://movimientolibre.com/tag/gulag.html">gulag</a></li>
                                <li><a href="https://movimientolibre.com/tag/hardware.html">hardware</a></li>
                                <li><a href="https://movimientolibre.com/tag/kde.html">kde</a></li>
                                <li><a href="https://movimientolibre.com/tag/kernel-linux.html">kernel linux</a></li>
                                <li><a href="https://movimientolibre.com/tag/latex.html">latex</a></li>
                                <li><a href="https://movimientolibre.com/tag/markdown.html">markdown</a></li>
                                <li><a href="https://movimientolibre.com/tag/php.html">php</a></li>
                                <li><a href="https://movimientolibre.com/tag/politica.html">política</a></li>
                                <li><a href="https://movimientolibre.com/tag/postgresql.html">postgresql</a></li>
                                <li><a href="https://movimientolibre.com/tag/python.html">python</a></li>
                                <li><a href="https://movimientolibre.com/tag/ruby.html">ruby</a></li>
                                <li><a href="https://movimientolibre.com/tag/servidores.html">servidores</a></li>
                                <li><a href="https://movimientolibre.com/tag/software-libre.html">software libre</a></li>
                                <li><a href="https://movimientolibre.com/tag/vida-cotidiana.html">vida cotidiana</a></li>
                                <li><a href="https://movimientolibre.com/tag/wallpapers.html">wallpapers</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card my-4 movimientolibre-card">
                        <h5 class="card-header movimientolibre-card-header">Buscar</h5>
                        <div class="card-body">
                            <script>
                                (function() {
                                    var cx = '015464194519155410478:jqayrodgycs';
                                    var gcse = document.createElement('script');
                                    gcse.type = 'text/javascript';
                                    gcse.async = true;
                                    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                                    var s = document.getElementsByTagName('script')[0];
                                    s.parentNode.insertBefore(gcse, s);
                                })();
                            </script>
                            <gcse:search></gcse:search>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>
    <footer class="text-muted">
        <div class="container">
            <hr>
            <p>
                Copyright &copy; 2006-2020 Guillermo Valdés Lozano.
                Protegidos por la licencia <a href="https://movimientolibre.com/licencias/gfdl-es/">GFDL</a>.
                Se otorga permiso para copiar, distribuir y/o modificar estos documentos.
                Sitio web elaborado con <a href="https://blog.getpelican.com/">Pelican</a> que es programado en <a href="https://python.org/">Python</a>; el código fuente está en <a href="https://github.com/MovimientoLibre/plataforma.web">GitHub</a> protegido por la licencia <a href="https://movimientolibre.com/licencias/gpl-2-es/">GPLv3</a>.
            </p>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src="https://movimientolibre.com/theme/js/movimiento-libre.js"></script>
</body>
</html>
