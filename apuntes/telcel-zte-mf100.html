<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
<!-- ===========================================================================================

        Movimiento Libre

        Este sitio web es elaborado con la Plataforma de Conocimiento.
        El software que lo construye está bajo la licencia GPL versión 3. © 2014, 2015, 2016.
          Una copia está contenida en el archivo LICENCE al bajar desde GitHub.
        Agradecemos y compartimos las tecnologías abiertas y gratuitas sobre las que se basa:
          Twitter Bootstrap    http://getbootstrap.com
          StartBootStrap       http://startbootstrap.com
          Morris.js            https://morrisjs.github.io/morris.js/
          Evolvere iconos      http://github.com/franksouza183/EvolvereSuit
        Descargue, aprenda y colabore con este Software Libre:
          GitHub               https://github.com/guivaloz

     =========================================================================================== -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Listo los programas a instalar y las configuraciones necesarias para que el ZTE MF100 de Telcel funcione en Gentoo Linux.">
  <meta name="author" content="guivaloz">
  <meta name="keywords" content="Gentoo Linux, Internet 3G, ZTE, Telcel">
  <title>Internet 3G con Telcel ZTE MF100 - Movimiento Libre</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-k2/8zcNbxVIh5mnQ52A0r3a6jAgMGxFJFE2707UxGCk= sha512-ZV9KawG2Legkwp3nAlxLIVFudTauWuBpC10uEafMHYL0Sarrz5A7G79kXh5+5+woxQ5HM559XX2UZjMJ36Wplg==" crossorigin="anonymous">
  <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="../rss.xml" rel="alternate" type="application/rss+xml" title="Movimiento Libre">
  <link href="../css/morris.css" rel="stylesheet">
  <link href="../css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet">
  <link href="../css/sb-admin-2.css" rel="stylesheet">
  <link href="../css/plataforma-de-conocimiento.css" rel="stylesheet">
  <link href="../css/movimiento-libre.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
</head>
<body>
<div id="wrapper">
  <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Movimiento Libre</a>
    </div>
  <div class="navbar-default sidebar" role="navigation">
    <div class="sidebar-nav navbar-collapse">
      <ul class="nav" id="side-menu">
        <li class="sidebar-search">
          <form method="get" id="" action="http://www.movimientolibre.com/buscador-resultados.html">
            <input type="hidden" value="" name="cx">
            <input type="hidden" value="FORID:11" name="cof">
            <div class="input-group custom-search-form">
              <input type="text" class="form-control" placeholder="Buscar..." value="" name="s" id="s">
              <span class="input-group-btn">
                <button class="btn btn-default" type="submit" id="searchsubmit"><i class="fa fa-search"></i></button>
              </span>
            </div>
          </form>
        </li>
        <li class="active"><a href="../apuntes/index.html"><span class="navegacion-icono"><i class="fa fa-files-o"></i></span> Apuntes</a></li>
        <li><a href="../articulos/index.html"><span class="navegacion-icono"><i class="fa fa-server"></i></span> Artículos</a></li>
        <li><a href="../presentaciones/index.html"><span class="navegacion-icono"><i class="fa fa-sun-o"></i></span> Presentaciones</a></li>
      </ul>
    </div>
  </div>
  </nav>
  <div id="page-wrapper">
    <div class="cuerpo">
      <article><div itemscope itemtype="http://schema.org/BlogPosting">
              <div class="encabezado">
          <h1 itemprop="name">Internet 3G con Telcel ZTE MF100</h1>
          <div class="encabezado-descripcion" itemprop="description">Listo los programas a instalar y las configuraciones necesarias para que el ZTE MF100 de Telcel funcione en Gentoo Linux.</div>
                <div class="encabezado-autor-fecha">
          Por <span itemprop="author">guivaloz</span>
          - <meta itemprop="datePublished" content="2011-01-20T12:50">20/01/2011 12:50
        </div>
        </div>
      
              <div itemprop="articleBody">
        <p>Me vi con la necesidad de tener conectividad a Internet en cualquier parte de la ciudad. Así que opté por contratar un servicio de Internet vía la red de telefonía celular.</p>

<p>Como se imaginarán, su servidor requiere que el dispositivo de comunicación funcione con GNU/Linux; así que elegí el <a href="http://www.ztemobile.com.mx/">ZTE</a> MF100, el cual, según la caja, funciona con <a href="http://www.ubuntu.com/">Ubuntu</a> 8.1. Den clic en las siguientes imágenes para verlas a mayor tamaño.</p>

<p><a href="telcel-zte-mf100/telcel-zte-mf100-frente.jpg"><img class="img-responsive" src="telcel-zte-mf100/telcel-zte-mf100-frente-small.jpg"></a>
<a href="telcel-zte-mf100/telcel-zte-mf100-reverso.jpg"><img class="img-responsive" src="telcel-zte-mf100/telcel-zte-mf100-reverso-small.jpg"></a></p>

<p>Lamentablemente la guía impresa no da ningún paso para Ubuntu. Ni siquiera en el sitio web del fabricante hay una guía al respecto.</p>

<p>Por lo que a continuación describiré los programas a instalar y las configuraciones necesarias para que el <em>ZTE MF100</em> de <a href="http://www.telcel.com/">Telcel</a> funcione en <a href="http://www.gentoo.org/">Gentoo Linux</a>. No dudo que esta información sea útil para otras distribuciones.</p>

<p>Como es costumbre, los comandos con # son ejecutados por <em>root</em>, mientras que los comandos con $ son ejecutados con un usuario común.</p>

<h3>Configuración del Kernel Linux</h3>

<p>Es necesario tener habilitado el soporte <em>PPP</em> en el kernel; así como el controlador <em>GSM/CDMA</em>. Note que también es necesario marcar como módulo el <em>USB Mass Storage support</em> porque los actuales dispositivos USB para Internet 3G también tienen una ranura para una <em>MicroSD de memoria Flash</em>.</p>

<pre><code> Device Drivers  ---&gt;
   [*]  Network device support  ---&gt;
     &lt;M&gt;  PPP (point-to-point protocol) support
       &lt;M&gt;  PPP support for async serial ports
       &lt;M&gt;  PPP support for sync tty ports
       &lt;M&gt;  PPP Deflate compression
       &lt;M&gt;  PPP BSD-Compress compression
       &lt;M&gt;  PPP MPPE compression (encryption)
       &lt;M&gt;  PPP over Ethernet
   [*]  USB support  ---&gt;
     &lt;M&gt;  USB Mass Storage support
     [*]  The shared table of common (or usual) storage devices
     &lt;M&gt;  USB Serial Converter support  ---&gt;
       [*]  USB Generic Serial Driver
         &lt;M&gt;  USB driver for GSM and CDMA modems
</code></pre>

<p>Si no se usa <em>USB Mass Storage support</em> como módulo, podría aparecer el dispositivo sólo como una unidad de almacenamiento; y en consecuencia, no se vería el dispositivo de comunicación.</p>

<h3>Instale USB Mode Switch</h3>

<p>El software <a href="http://www.draisberghof.de/usb_modeswitch/">USB_ModeSwitch</a> es una herramienta que sirve para controlar esta <em>doble cara</em> que presenta el dispositivo; la de ser dispositivo de red y dispositivo de almacenamiento al mismo tiempo.</p>

<pre><code># emerge usb_modeswitch
</code></pre>

<h3>Revise la configuración de Udev</h3>

<p>Revise la versión de <a href="http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev.html">Udev</a> con el comando <em>equery</em>:</p>

<pre><code># equery list udev
[ Searching for package 'udev' in all categories among: ]
* installed packages
[I--] [  ] sys-fs/udev-151-r4
</code></pre>

<p>Afortunadamente, la versión que ven de <em>Udev</em> tiene la configuración lista para manipular el dispositivo <em>ZTE</em> cuando se conecta. Vea el contenido de <em>40-usb_modeswitch.rules</em> sin peligro de alterarlo con:</p>

<pre><code>$ less /lib/udev/rules.d/40-usb_modeswitch.rules
</code></pre>

<p>Ahí encontrará las siguientes líneas:</p>

<pre><code># ZTE devices
ATTRS{idVendor}=="19d2", ATTRS{idProduct}=="2000", RUN+="usb_modeswitch '%b/%k'
</code></pre>

<p>Lo que hace es ejecutar <em>usb_modeswitch</em> cuando un dispositivo <em>ZTE</em> (vendedor <em>19d2</em> y producto <em>2000</em>) se conecta.</p>

<h3>Revise que se cargue correctamente al conectarse</h3>

<p>Conecte el dispositivo. Espere a que la luz led del mismo quede en color verde y estable. Luego revise los últimos mensajes del kernel con el comando <em>dmesg</em>:</p>

<pre><code>$ dmesg
</code></pre>

<p>Por ejemplo, la carga exitosa muestra mensajes como los siguientes:</p>

<pre><code>$ dmesg | grep modem
USB Serial support registered for GSM modem (1-port)
option 1-8:1.0: GSM modem (1-port) converter detected
usb 1-8: GSM modem (1-port) converter now attached to ttyUSB0
option 1-8:1.1: GSM modem (1-port) converter detected
usb 1-8: GSM modem (1-port) converter now attached to ttyUSB1
option 1-8:1.3: GSM modem (1-port) converter detected
usb 1-8: GSM modem (1-port) converter now attached to ttyUSB2
option: v0.7.2:USB Driver for GSM modems
</code></pre>

<p>Vea que en la lista de módulos cargados aparezcan <em>usbserial</em> y <em>usb_wwan</em>:</p>

<pre><code>$ lsmod
</code></pre>

<p>Debe haber uno o varios dispositivos en el directorio <em>/dev</em> como <em>ttyUSB1</em>, <em>ttyUSB2</em> y/o <em>ttyUSB3</em>.</p>

<pre><code>$ ls -l /dev/ttyUSB*
</code></pre>

<p>Continúe con este manual si son exitosas estas pruebas. Si no, revise de nuevo hasta conseguirlo.</p>

<h3>Agregue su usuario al grupo uucp</h3>

<p>Como habrá notado, los <em>ttyUSB</em> son propiedad de <em>root</em> y del grupo <em>uucp</em>. Agregue su usuario al grupo <em>uucp</em> con el siguiente comando, sustituyendo <em>NOMBREDEUSUARIO</em> por el suyo:</p>

<pre><code># gpasswd -a NOMBREDEUSUARIO uucp
</code></pre>

<h3>Instale wvdial</h3>

<p>Necesitamos instalar el software <a href="http://alumnit.ca/wiki/?WvDial">WvDial</a> para realizar la rutina de conexión.</p>

<pre><code># emerge wvdial
</code></pre>

<p>Como dependecias, instalará también <em>net-dialup/ppp</em>, <em>virtual/c++-tr1-functional</em> y <em>net-libs/wvstreams</em>.</p>

<h3>Configure wvdial</h3>

<p>Ejecute el programa de configuración automática de WvDial con el comando:</p>

<pre><code># wvdialconf
</code></pre>

<p>Éste creará un nuevo archivo <em>/etc/wvdial.conf</em> en base a lo que se detecte en el hardware. Pero es muy probable que <em>no sea suficiente</em> y deberá hacer modificaciones adicionales por el modelo del dispositivo, las capacidades de la red y los parámetros de su proveedor.</p>

<p>Edite el archivo con el sencillo editor <em>nano</em>:</p>

<pre><code># nano /etc/wvdial.conf
</code></pre>

<p>El contenido de este archivo es texto con la típica sintaxis de los archivos <em>ini</em>. Lo que sigue es la configuración que para el <em>Internet 3G de Telcel en México</em>:</p>

<pre><code>[Dialer Defaults]
Init1 = ATZ
Init2 = ATQ0 V1 E1 S0=0 &amp;C1 &amp;D2 +FCLASS=0
Init3 = AT+CGDCONT=1,"IP","internet.itelcel.com"
Stupid Mode = on
Modem Type = Analog Modem
Modem = /dev/ttyUSB2
Baud = 460800
ISDN = 0
Phone = *99#
Username = webgprs
Password = webgprs2002
</code></pre>

<p>Destaco de este archivo:</p>

<ul>
<li>Que he agregado la línea <em>Init3</em> con parámetros propios para Telcel.</li>
<li>Debe usarse el modo <em>estúpido</em> :D por lo que está en <em>on</em>.</li>
<li>Para mi ZTE MF100 accedo al modem por <em>/dev/ttyUSB2</em>. Pruebe los otros <em>ttyUSB</em> si aparece el error <em>The PPP daemon has died: A modem hung up the phone (exit code = 16)</em>.</li>
<li>La velocidad <em>Baud</em> está al tope. Al conectarse verá la velocidad establecida.</li>
<li>Los valores de <em>Phone</em>, <em>Username</em> y <em>Password</em> son propios de Telcel.</li>
</ul>

<h3>Conéctese</h3>

<p>Para conectarse, abra una terminal y ejecute:</p>

<pre><code># sudo wvdial
</code></pre>

<p>Mantenga esa terminal abierta. Abra otra y observe el dispositivo <em>ppp0</em> que es creado al conectarse a la red con:</p>

<pre><code>$ sudo ifconfig ppp0
</code></pre>

<p>Éste comando también sirve para monitorear la cantidad de información recibida y enviada. De forma manual, puede tomar nota de lo que consume antes de desconectar el dispositivo y así cuidar de no exceder el límite del proveedor.</p>

<p>Para terminar la conexión, vaya a la terminal donde ejecutó <em>wvdial</em>, presione CTRL-C, espere a que termine y desconecte el dispositivo.</p>

        </div>
      </div></article>
    </div>
    <div class="mapa-inferior">
      <div class="row">
        <div class="col-md-8">
            <a href="../index.html">Inicio</a> |
            <a href="../apuntes/index.html">Apuntes</a> |
            <a href="../articulos/index.html">Artículos</a> |
            <a href="../licencias/index.html">Licencias</a> |
            <a href="../presentaciones/index.html">Presentaciones</a> |
            <a href="../contacto/index.html">Contacto</a>
        </div>
        <div class="col-md-4">
          <div class="pull-right redes-sociales">
            <a class="fa fa-twitter-square" href="https://twitter.com/guivaloz" target="_blank"></a>
            <a class="fa fa-google-plus-square" href="https://plus.google.com/+GuillermoVald%C3%A9sLozano" target="_blank"></a>
            <a class="fa fa-github-square" href="https://github.com/guivaloz" target="_blank"></a>
            <a class="fa fa-rss-square" href="../rss.xml"></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
<script src="../js/raphael-min.js"></script>
<script src="../js/morris.min.js"></script>
<script src="../js/plugins/metisMenu/metisMenu.min.js"></script>
<script src="../js/sb-admin-2.js"></script>
<script>

</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-74263253-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
