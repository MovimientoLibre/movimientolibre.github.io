<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="Pelican Static Site Generator, Powered by Python">
    <meta name="description" content="La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.">
    <meta name="keywords" content="php, apuntes">
    <meta name="author" content="Guillermo Valdés Lozano (guivaloz)">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@guivaloz">
    <meta name="twitter:title" content="Instalación de FreeMED en Debian Etch">
    <meta name="twitter:description" content="La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.">
    <meta name="twitter:image:src" content="/apuntes/freemed-instalacion/php.png">
    <meta property="og:title" content="Instalación de FreeMED en Debian Etch">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/apuntes/freemed-instalacion/">
    <meta property="og:image" content="/apuntes/freemed-instalacion/php.png">
    <meta property="og:description" content="La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.">
    <meta property="og:site_name" content="Movimiento Libre">
    <title>Instalación de FreeMED en Debian Etch - Movimiento Libre</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" href="/theme/images/icon-hires.png" sizes="192x192">
    <link rel="icon" href="/theme/images/icon-normal.png" sizes="128x128">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-76x76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="alternate" href="/feeds/all.rss.xml" type="application/rss+xml" title="Movimiento Libre Full RSS Feed" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans">
    <link rel="stylesheet" href="/theme/css/movimiento-libre.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74263253-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-74263253-1');
    </script>
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-light fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="/">Movimiento Libre</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navBootstrap4" aria-controls="navBootstrap4" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navBootstrap4">
                <ul class="navbar-nav mr-auto">
                    <li><a class="nav-link" href="/category/apuntes.html">Apuntes</a></li>
                    <li><a class="nav-link" href="/category/articulos.html">Artículos</a></li>
                    <li><a class="nav-link" href="/category/presentaciones.html">Presentaciones</a></li>
                    <li><a class="nav-link" href="/portafolio/contacto/index.html">Contacto</a></li>
                </ul>
                <ul class="navbar-nav movimientolibre-navbar-icons">
                    <li><a class="movimientolibre-navbar-icon-link" href="https://twitter.com/guivaloz/" target="_blank"><i class="fab fa-twitter-square"></i></a></li>
                    <li><a class="movimientolibre-navbar-icon-link" href="https://www.facebook.com/movimientolibrepuntocom/" target="_blank"><i class="fab fa-facebook-square"></i></a></li>
                    <li><a class="movimientolibre-navbar-icon-link" href="https://github.com/guivaloz" target="_blank"><i class="fab fa-github-square"></i></a></li>
                    <li><a class="movimientolibre-navbar-icon-link" href="https://movimientolibre.com/feeds/all.rss.xml"><i class="fa fa-rss-square"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <header>
            <div class="jumbotron head-welcome" itemscope itemtype="http://schema.org/Organization">
                <h1 class="jumbotron-heading head-site-name" itemprop="name">Movimiento Libre</h1>
                <p class="head-site-description" itemprop="description">Plataforma de divulgación de conocimiento libre por Ing. Guillermo Valdés Lozano (guivaloz)</p>
            </div>
        </header>
        <div class="row">
            <div class="col-sm-8">
                <article class="article-post">
                    <script type="application/ld+json">
                        {
                            "@context": "http://schema.org",
                            "@type": "Article",
                            "publisher": {
                            "@type": "Organization",
                            "name": "Movimiento Libre",
                            "logo": {
                                "@type": "ImageObject",
                                "url": "https://movimientolibre.com/theme/images/movimientolibre.png"
                            },
                            "url": "https://movimientolibre.com"
                        },
                        "author": "Guillermo Valdés Lozano (guivaloz)",
                        "name": "Instalación de FreeMED en Debian Etch",
                        "headline": "Instalación de FreeMED en Debian Etch",
                        "description": "La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.",
                        "dateCreated": "2008-01-16 19:10:00-06:00",
                        "datePublished": "2008-01-16 19:10:00-06:00",
                        "dateModified": "2008-01-16 19:10:00-06:00",
                        "image": "https://movimientolibre.com/apuntes/freemed-instalacion/php.png",
                        "url": "https://movimientolibre.com/apuntes/freemed-instalacion/"
                        }
                    </script>
                    <h2 class="article-post-title">Instalación de FreeMED en Debian Etch</h2>
                    <p class="article-post-meta">Guillermo Valdés Lozano (guivaloz)<br>16 enero 2008</p>
<p><strong>ACTUALIZACION</strong> Freemed ya es compatible con PHP5 y MySQL5, <a href="http://www.freemedsoftware.org/node/187">Más información aquí</a>.</p>
<p>No cabe duda que el mundo del software libre es vasto y que podemos encontrar respuesta a problemas particulares. Todos nos hemos preguntado alguna vez: ¿tendrá alguien más mi problema? ¿ya habrá una solución en software libre?.</p>
<p>Les explicaré a continuación la instalación del <a href="http://freemed.org/">FreeMED</a>, una aplicación web basada en <strong>PHP</strong>, <strong>MySQL</strong> y <strong>Apache</strong> que sirve (en principio) para administrar las citas de los pacientes con sus médicos. He aquí unas imágenes del mismo:</p>
<p><img class="img-fluid" src="screenshot-1.png" alt="FreeMED 1"></p>
<p><img class="img-fluid" src="screenshot-2.png" alt="FreeMED 2"></p>
<p><img class="img-fluid" src="screenshot-3.png" alt="FreeMED 3"></p>
<p><img class="img-fluid" src="screenshot-4.png" alt="FreeMED 4"></p>
<p><img class="img-fluid" src="screenshot-5.png" alt="FreeMED 5"></p>
<p>El proyecto se ve maduro, tiene un código genial y es usado en varios países. Pero tiene en este momento dos desventajas: el sistema está programado en <strong>PHP 4</strong> (incompatible con el más nuevo PHP 5) y necesita invariablemente el <strong>MySQL 4</strong> (falla con MySQL 5). Tiene traducción al español, aunque se le notan varios errores en ello.</p>
<p>Mi gusto personal es que los servidores tengan instalada la distribución <a href="http://www.gentoo.org/">Gentoo</a>. Pero los líderes de Gentoo han removido al PHP 4 de sus repositorios, por la sencilla razón de que <em>PHP 4 está <em>sentenciado a muerte</em></em>: en un futuro muy próximo se le dejará de dar mantenimiento. Lamentablemente tenemos al día de hoy un enorme número de buenos sistemas en PHP 4 que necesitan ser migrados al PHP 5 si es que quieren <em>mantenerse vivos</em> en los años venideros. Uno de tantos es el FreeMED. Ni modo, la mejor opción para este sistema es <a href="http://www.debian.org/">Debian</a> no es Gentoo.</p>
<p>El otro problema es que <strong>necesita MySQL 4</strong>, por que los comandos SQL que usa fallarán al tratar de insertar fechas en MySQL 5. No aparece MySQL 4 en Debian Lenny, así que tendremos que usar <strong>Debian Etch</strong>.</p>
<p>Vamos a partir de que tenga instalado Debian Etch en su equipo, a partir de un disco de instalación por red (CD de network install), ya que no es obligado tener interfaz gráfica en el servidor...</p>
<h3>Instalaciones</h3>
<p>Instale Apache 2, MySQL, PHP 4, TeTeX y Subversion:</p>
<div class="highlight"><pre><span></span><code><span class="err"># aptitude update</span>
<span class="err"># aptitude install apache2 libapache2-mod-php4 php4-cgi mysql-server-4.1 php4-mysql imagemagick tetex-bin tetex-extra subversion</span>
</code></pre></div>


<h3>Cree el usuario y la base de datos para el FreeMED en MySQL</h3>
<p>Si necesita establecer la contraseña del usuario root en MySQL:</p>
<div class="highlight"><pre><span></span><code><span class="err"># mysqladmin -u root password ROOTPASSWD</span>
</code></pre></div>


<p>Ingrese a MySQL como root:</p>
<div class="highlight"><pre><span></span><code><span class="err"># mysql -u root -p</span>
<span class="err">Enter password:******</span>
</code></pre></div>


<p>Otorgue (y en consecencia se creará el usuario) a freemed los privilegios totales en esa base de datos:</p>
<div class="highlight"><pre><span></span><code><span class="err">&gt; GRANT ALL ON freemed.* TO freemed@localhost IDENTIFIED BY &#39;FREEMEDPASSWD&#39;;</span>
</code></pre></div>


<p>Salga de MySQL con:</p>
<div class="highlight"><pre><span></span><code><span class="err">&gt; EXIT</span>
</code></pre></div>


<h3>Baje el FreeMED</h3>
<p>Debe instalarse FreeMED en /usr/share/freemed. Tenga paciencia con el comando <em>svn</em>, ya que puede tardar varios minutos en mostrar actividad.</p>
<div class="highlight"><pre><span></span><code><span class="err"># mkdir /usr/share/freemed</span>
<span class="err"># cd /usr/share</span>
<span class="err"># svn co http://svn.freemedsoftware.org/freemed/branches/0.8.x freemed</span>
</code></pre></div>


<p>Cambie los permisos de todos los archivos del FreeMED al usuario del Apache:</p>
<div class="highlight"><pre><span></span><code><span class="err"># chown -Rf www-data:www-data freemed</span>
</code></pre></div>


<h3>Configure el Apache</h3>
<p>Edite la directiva DirectoryIndex de Apache para que tome por defecto primero a index.php y luego a los demás:</p>
<div class="highlight"><pre><span></span><code><span class="err"># nano -w /etc/apache2/mods-available/dir.conf</span>
</code></pre></div>


<p>Contenido:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;IfModule</span> <span class="err">mod_dir.c</span><span class="nt">&gt;</span>
    DirectoryIndex index.php index.html index.cgi index.pl index.xhtml
<span class="nt">&lt;/IfModule&gt;</span>
</code></pre></div>


<p>Necesitamos declararle al Apache dónde se encuentra el sistema FreeMED, así que modificaremos su configuración:</p>
<div class="highlight"><pre><span></span><code><span class="err"># nano -w /etc/apache2/sites-available/default</span>
</code></pre></div>


<p>A continuación muestro parte del contenido en <em>default</em> para que usted haga las modificaciones necesarias, cuidando que no se afecten otros sitios o aplicaciones web que estén también en su servidor:</p>
<div class="highlight"><pre><span></span><code>NameVirtualHost *
<span class="nt">&lt;VirtualHost</span> <span class="err">*</span><span class="nt">&gt;</span>
    # Puede hacer que cualquier petición a / sea redirigida a /freemed/
    <span class="nt">&lt;Directory</span> <span class="err">/var/www</span><span class="nt">/&gt;</span>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        Allow from all
        # La siguiente instrucción hace lo comentado previamente:
        RedirectMatch ^/$ /freemed/
    <span class="nt">&lt;/Directory&gt;</span>
    # Aplicación web FreeMED
    Alias /freemed/ /usr/share/freemed/
    <span class="nt">&lt;Directory</span> <span class="err">/usr/share/freemed</span><span class="nt">/&gt;</span>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        Allow from all
    <span class="nt">&lt;/Directory&gt;</span>
<span class="nt">&lt;/VirtualHost&gt;</span>
</code></pre></div>


<p>Reinicie el Apache para que se apliquen los cambios que hemos hecho</p>
<div class="highlight"><pre><span></span><code><span class="err"># /etc/init.d/apache2 restart</span>
</code></pre></div>


<h3>Configure FreeMed</h3>
<div class="highlight"><pre><span></span><code><span class="err"># nano -w /usr/share/freemed/lib/settings.php</span>
</code></pre></div>


<p>Modifique los siguientes comandos:</p>
<div class="highlight"><pre><span></span><code><span class="err">define (&#39;DB_HOST&#39;, &quot;localhost&quot;);          // database (SQL) host location</span>
<span class="err">define (&#39;DB_NAME&#39;, &quot;freemed&quot;);            // database name</span>
<span class="err">define (&#39;DB_USER&#39;, &quot;freemed&quot;);            // SQL server username</span>
<span class="err">define (&#39;DB_PASSWORD&#39;, &quot;FREEMEDPASSWD&quot;);  // SQL server password</span>
<span class="err">define (&#39;HOST&#39;, &#39;freemed&#39;);               // host name for this system</span>
<span class="err">define (&#39;BASE_URL&#39;, &#39;/freemed&#39;);          // offset (i.e. http://here/package)</span>
</code></pre></div>


<p>Si el servidor no tiene instalada la interfaz gráfica, y por lo tanto, no tiene instalado un navegador de internet, necesitará autorizar que el script de instalación sea ejecutado desde otra estación de trabajo modificando la siguiente línea, use la IP del equipo donde entrará por primera vez a FreeMED:</p>
<div class="highlight"><pre><span></span><code><span class="err">define (&#39;INIT_ADDR&#39;,&quot;192.168.1.66&quot;);  // this is the only IP address that can run the init wizard...</span>
</code></pre></div>


<h3>Hostname</h3>
<p>Como uso un modem 2Wire de Infinitum que es un ruteador y un ligero DNS, necesito que se pueda accesar a la aplicación web escribiendo http://freemed desde cualquier estación de trabajo. Modifique el archivo de configuración del dhclient3:</p>
<div class="highlight"><pre><span></span><code><span class="err"># nano -w /etc/dhcp3/dhclient.conf</span>
</code></pre></div>


<p>Y modifique esta línea:</p>
<div class="highlight"><pre><span></span><code><span class="err">send host-name &quot;freemed&quot;</span>
</code></pre></div>


<p>Y reinicie el servidor. Entre a la página <em>home</em> del módem 2Wire para confirmar que el <em>hostname</em> del servidor sea freemed.</p>
<h3>Script de instalación</h3>
<p>Visite la página del sistema por el navegador, http://freemed/. Si todo va bien, el sistema se dará cuenta que es ejecutado por primera vez.</p>
<p><img class="img-fluid" src="1-primer-ingreso.png"></p>
<p>Escriba el nombre de la base de datos (que llamamos igual <em>freemed</em>) y la contraseña que haya declarado para el usuario <em>freemed</em>. También debe escribir en dos ocasiones la contraseña del administrador del sistema. Procure tomar nota y evite confundirse. Tenga en mente que el sistema operativo, los servicios y los sistemas pueden tener sus propios usuarios y contraseñas.</p>
<p><img class="img-fluid" src="2-escribir-bd-y-contrasenas.png">
<img class="img-fluid" src="3-script-instalacion-terminado.png"></p>
<p>Así se crearán y poblarán las tablas de la base de datos. La instalación estará terminada.</p>
<p>En la pantalla de ingreso, use como nombre de usuario <em>admin</em> y escriba la contraseña del administrador:</p>
<p><img class="img-fluid" src="4-pantalla-ingreso.png"></p>
<p>Estaré aprendiendiendo el uso de este sistema. Esperen comentarios futuros.</p>
                </article>
            </div>
            <div class="col-sm-4">
                <aside>
                    <div class="card my-4 movimientolibre-card aside-about">
                        <h5 class="card-header movimientolibre-card-header">A cerca de</h5>
                        <div class="card-body">
                            <p class="card-text">
                                Este es un sitio web que busca divulgar
                                conocimiento y promover el uso de software libre.
                                Su creador es reconocido como desarrollador que
                                fabrica estas herramientas tanto para entidades
                                públicas como privadas.
                            </p>
                        </div>
                    </div>
                    <div class="card my-4 movimientolibre-card">
                        <h5 class="card-header movimientolibre-card-header">Etiquetas</h5>
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li><a href="/tag/astronomia.html">astronomía</a></li>
                                <li><a href="/tag/ciencia-de-datos.html">ciencia de datos</a></li>
                                <li><a href="/tag/conferencias.html">conferencias</a></li>
                                <li><a href="/tag/desarrollo.html">desarrollo</a></li>
                                <li><a href="/tag/docker.html">docker</a></li>
                                <li><a href="/tag/educacion.html">educación</a></li>
                                <li><a href="/tag/fedora.html">fedora</a></li>
                                <li><a href="/tag/flisol.html">flisol</a></li>
                                <li><a href="/tag/gentoo-linux.html">gentoo linux</a></li>
                                <li><a href="/tag/git.html">git</a></li>
                                <li><a href="/tag/gnu-linux.html">gnu linux</a></li>
                                <li><a href="/tag/gulag.html">gulag</a></li>
                                <li><a href="/tag/hardware.html">hardware</a></li>
                                <li><a href="/tag/kde.html">kde</a></li>
                                <li><a href="/tag/kernel-linux.html">kernel linux</a></li>
                                <li><a href="/tag/latex.html">latex</a></li>
                                <li><a href="/tag/markdown.html">markdown</a></li>
                                <li><a href="/tag/pelican.html">pelican</a></li>
                                <li><a href="/tag/php.html">php</a></li>
                                <li><a href="/tag/politica.html">política</a></li>
                                <li><a href="/tag/postgresql.html">postgresql</a></li>
                                <li><a href="/tag/python.html">python</a></li>
                                <li><a href="/tag/ruby.html">ruby</a></li>
                                <li><a href="/tag/servidores.html">servidores</a></li>
                                <li><a href="/tag/software-libre.html">software libre</a></li>
                                <li><a href="/tag/vida-cotidiana.html">vida cotidiana</a></li>
                                <li><a href="/tag/wallpapers.html">wallpapers</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card my-4 movimientolibre-card">
                        <h5 class="card-header movimientolibre-card-header">Buscar</h5>
                        <div class="card-body">
                            <script>
                                (function() {
                                    var cx = '015464194519155410478:jqayrodgycs';
                                    var gcse = document.createElement('script');
                                    gcse.type = 'text/javascript';
                                    gcse.async = true;
                                    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                                    var s = document.getElementsByTagName('script')[0];
                                    s.parentNode.insertBefore(gcse, s);
                                })();
                            </script>
                            <gcse:search></gcse:search>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>
    <footer class="text-muted">
        <div class="container">
            <hr>
            <p>
                Copyright &copy; 2006-2020 Guillermo Valdés Lozano.
                Protegidos por la licencia <a href="/licencias/gfdl-es/">GFDL</a>.
                Se otorga permiso para copiar, distribuir y/o modificar estos documentos.
                Sitio web elaborado con <a href="https://blog.getpelican.com/">Pelican</a> que es programado en <a href="https://python.org/">Python</a>; el código fuente está en <a href="https://github.com/MovimientoLibre/plataforma.web">GitHub</a> protegido por la licencia <a href="/licencias/gpl-2-es/">GPLv3</a>.
            </p>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src="/theme/js/movimiento-libre.js"></script>
</body>
</html>
