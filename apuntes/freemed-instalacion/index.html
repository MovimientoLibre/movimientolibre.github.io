<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="<p>La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.</p>">
    <meta name="keywords" content="[<Tag 'php'>]">
    <meta name="author" content="Guillermo Valdés Lozano">
    <meta itemprop="name" content="Instalación de FreeMED en Debian Etch">
    <meta itemprop="description" content="<p>La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.</p>">
    <meta itemprop="image" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@guivaloz">
    <meta name="twitter:title" content="Instalación de FreeMED en Debian Etch">
    <meta name="twitter:description" content="<p>La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.</p>">
    <meta name="twitter:image:src" content="">
    <meta property="og:title" content="Instalación de FreeMED en Debian Etch">
    <meta property="og:type" content="article">
    <meta property="og:url" content="apuntes/freemed-instalacion/">
    <meta property="og:image" content="">
    <meta property="og:description" content="<p>La instalación del FreeMED, una aplicación web basada en PHP, MySQL y Apache que sirve para administrar las citas de los pacientes con sus médicos.</p>">
    <meta property="og:site_name" content="Movimiento Libre">
    <title>Instalación de FreeMED en Debian Etch - Movimiento Libre</title>
    <link rel="shortcut icon" type="image/x-icon" href="http://www.movimientolibre.com/favicon.ico">
    <link rel="icon" href="http://www.movimientolibre.com/theme/images/icon-hires.png" sizes="192x192">
    <link rel="icon" href="http://www.movimientolibre.com/theme/images/icon-normal.png" sizes="128x128">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-76x76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="http://www.movimientolibre.com/theme/images/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="alternate" href="http://www.movimientolibre.com/feeds/all.rss.xml" type="application/rss+xml" title="Movimiento Libre Full RSS Feed" />
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/vendor/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,700">
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/css/blog-post.css">
    <link rel="stylesheet" href="http://www.movimientolibre.com/theme/css/movimiento-libre.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="http://www.movimientolibre.com/">Movimiento Libre</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/category/apuntes.html">Apuntes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/category/articulos.html">Artículos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/category/presentaciones.html">Presentaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://www.movimientolibre.com/portafolio/contacto/">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-lg-8">
    <article>
        <h1 class="mt-4">Instalación de FreeMED en Debian Etch</h1>
        <p class="lead">Guillermo Valdés Lozano</p>
        <p>2008-01-16 19:10:00-06:00</p>
        <hr>
        <p><strong>ACTUALIZACION</strong> Freemed ya es compatible con PHP5 y MySQL5, <a href="http://www.freemedsoftware.org/node/187">Más información aquí</a>.</p>
<p>No cabe duda que el mundo del software libre es vasto y que podemos encontrar respuesta a problemas particulares. Todos nos hemos preguntado alguna vez: ¿tendrá alguien más mi problema? ¿ya habrá una solución en software libre?.</p>
<p>Les explicaré a continuación la instalación del <a href="http://freemed.org/">FreeMED</a>, una aplicación web basada en <strong>PHP</strong>, <strong>MySQL</strong> y <strong>Apache</strong> que sirve (en principio) para administrar las citas de los pacientes con sus médicos. He aquí unas imágenes del mismo:</p>
<p><a href="screenshot-1-small.png"><img class="img-fluid" src="screenshot-1.png"></a>
<a href="screenshot-2-small.png"><img class="img-fluid" src="screenshot-2.png"></a>
<a href="screenshot-3-small.png"><img class="img-fluid" src="screenshot-3.png"></a>
<a href="screenshot-4-small.png"><img class="img-fluid" src="screenshot-4.png"></a>
<a href="screenshot-5-small.png"><img class="img-fluid" src="screenshot-5.png"></a></p>
<p>El proyecto se ve maduro, tiene un código genial y es usado en varios países. Pero tiene en este momento dos desventajas: el sistema está programado en <strong>PHP 4</strong> (incompatible con el más nuevo PHP 5) y necesita invariablemente el <strong>MySQL 4</strong> (falla con MySQL 5). Tiene traducción al español, aunque se le notan varios errores en ello.</p>
<p>Mi gusto personal es que los servidores tengan instalada la distribución <a href="http://www.gentoo.org/">Gentoo</a>. Pero los líderes de Gentoo han removido al PHP 4 de sus repositorios, por la sencilla razón de que <em>PHP 4 está <em>sentenciado a muerte</em></em>: en un futuro muy próximo se le dejará de dar mantenimiento. Lamentablemente tenemos al día de hoy un enorme número de buenos sistemas en PHP 4 que necesitan ser migrados al PHP 5 si es que quieren <em>mantenerse vivos</em> en los años venideros. Uno de tantos es el FreeMED. Ni modo, la mejor opción para este sistema es <a href="http://www.debian.org/">Debian</a> no es Gentoo.</p>
<p>El otro problema es que <strong>necesita MySQL 4</strong>, por que los comandos SQL que usa fallarán al tratar de insertar fechas en MySQL 5. No aparece MySQL 4 en Debian Lenny, así que tendremos que usar <strong>Debian Etch</strong>.</p>
<p>Vamos a partir de que tenga instalado Debian Etch en su equipo, a partir de un disco de instalación por red (CD de network install), ya que no es obligado tener interfaz gráfica en el servidor...</p>
<h3>Instalaciones</h3>
<p>Instale Apache 2, MySQL, PHP 4, TeTeX y Subversion:</p>
<div class="highlight"><pre><span></span># aptitude update
# aptitude install apache2 libapache2-mod-php4 php4-cgi mysql-server-4.1 php4-mysql imagemagick tetex-bin tetex-extra subversion
</pre></div>


<h3>Cree el usuario y la base de datos para el FreeMED en MySQL</h3>
<p>Si necesita establecer la contraseña del usuario root en MySQL:</p>
<div class="highlight"><pre><span></span># mysqladmin -u root password ROOTPASSWD
</pre></div>


<p>Ingrese a MySQL como root:</p>
<div class="highlight"><pre><span></span># mysql -u root -p
Enter password:******
</pre></div>


<p>Otorgue (y en consecencia se creará el usuario) a freemed los privilegios totales en esa base de datos:</p>
<div class="highlight"><pre><span></span>&gt; GRANT ALL ON freemed.* TO freemed@localhost IDENTIFIED BY &#39;FREEMEDPASSWD&#39;;
</pre></div>


<p>Salga de MySQL con:</p>
<div class="highlight"><pre><span></span>&gt; EXIT
</pre></div>


<h3>Baje el FreeMED</h3>
<p>Debe instalarse FreeMED en /usr/share/freemed. Tenga paciencia con el comando <em>svn</em>, ya que puede tardar varios minutos en mostrar actividad.</p>
<div class="highlight"><pre><span></span># mkdir /usr/share/freemed
# cd /usr/share
# svn co http://svn.freemedsoftware.org/freemed/branches/0.8.x freemed
</pre></div>


<p>Cambie los permisos de todos los archivos del FreeMED al usuario del Apache:</p>
<div class="highlight"><pre><span></span># chown -Rf www-data:www-data freemed
</pre></div>


<h3>Configure el Apache</h3>
<p>Edite la directiva DirectoryIndex de Apache para que tome por defecto primero a index.php y luego a los demás:</p>
<div class="highlight"><pre><span></span># nano -w /etc/apache2/mods-available/dir.conf
</pre></div>


<p>Contenido:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span> <span class="err">mod_dir.c</span><span class="nt">&gt;</span>
    DirectoryIndex index.php index.html index.cgi index.pl index.xhtml
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>


<p>Necesitamos declararle al Apache dónde se encuentra el sistema FreeMED, así que modificaremos su configuración:</p>
<div class="highlight"><pre><span></span># nano -w /etc/apache2/sites-available/default
</pre></div>


<p>A continuación muestro parte del contenido en <em>default</em> para que usted haga las modificaciones necesarias, cuidando que no se afecten otros sitios o aplicaciones web que estén también en su servidor:</p>
<div class="highlight"><pre><span></span>NameVirtualHost *
<span class="nt">&lt;VirtualHost</span> <span class="err">*</span><span class="nt">&gt;</span>
    # Puede hacer que cualquier petición a / sea redirigida a /freemed/
    <span class="nt">&lt;Directory</span> <span class="err">/var/www</span><span class="nt">/&gt;</span>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        Allow from all
        # La siguiente instrucción hace lo comentado previamente:
        RedirectMatch ^/$ /freemed/
    <span class="nt">&lt;/Directory&gt;</span>
    # Aplicación web FreeMED
    Alias /freemed/ /usr/share/freemed/
    <span class="nt">&lt;Directory</span> <span class="err">/usr/share/freemed</span><span class="nt">/&gt;</span>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        Allow from all
    <span class="nt">&lt;/Directory&gt;</span>
<span class="nt">&lt;/VirtualHost&gt;</span>
</pre></div>


<p>Reinicie el Apache para que se apliquen los cambios que hemos hecho</p>
<div class="highlight"><pre><span></span># /etc/init.d/apache2 restart
</pre></div>


<h3>Configure FreeMed</h3>
<div class="highlight"><pre><span></span># nano -w /usr/share/freemed/lib/settings.php
</pre></div>


<p>Modifique los siguientes comandos:</p>
<div class="highlight"><pre><span></span>define (&#39;DB_HOST&#39;, &quot;localhost&quot;);          // database (SQL) host location
define (&#39;DB_NAME&#39;, &quot;freemed&quot;);            // database name
define (&#39;DB_USER&#39;, &quot;freemed&quot;);            // SQL server username
define (&#39;DB_PASSWORD&#39;, &quot;FREEMEDPASSWD&quot;);  // SQL server password
define (&#39;HOST&#39;, &#39;freemed&#39;);               // host name for this system
define (&#39;BASE_URL&#39;, &#39;/freemed&#39;);          // offset (i.e. http://here/package)
</pre></div>


<p>Si el servidor no tiene instalada la interfaz gráfica, y por lo tanto, no tiene instalado un navegador de internet, necesitará autorizar que el script de instalación sea ejecutado desde otra estación de trabajo modificando la siguiente línea, use la IP del equipo donde entrará por primera vez a FreeMED:</p>
<div class="highlight"><pre><span></span>define (&#39;INIT_ADDR&#39;,&quot;192.168.1.66&quot;);  // this is the only IP address that can run the init wizard...
</pre></div>


<h3>Hostname</h3>
<p>Como uso un modem 2Wire de Infinitum que es un ruteador y un ligero DNS, necesito que se pueda accesar a la aplicación web escribiendo http://freemed desde cualquier estación de trabajo. Modifique el archivo de configuración del dhclient3:</p>
<div class="highlight"><pre><span></span># nano -w /etc/dhcp3/dhclient.conf
</pre></div>


<p>Y modifique esta línea:</p>
<div class="highlight"><pre><span></span>send host-name &quot;freemed&quot;
</pre></div>


<p>Y reinicie el servidor. Entre a la página <em>home</em> del módem 2Wire para confirmar que el <em>hostname</em> del servidor sea freemed.</p>
<h3>Script de instalación</h3>
<p>Visite la página del sistema por el navegador, http://freemed/. Si todo va bien, el sistema se dará cuenta que es ejecutado por primera vez.</p>
<p><a href="1-primer-ingreso.png"><img class="img-fluid" src="1-primer-ingreso-small.png"></a></p>
<p>Escriba el nombre de la base de datos (que llamamos igual <em>freemed</em>) y la contraseña que haya declarado para el usuario <em>freemed</em>. También debe escribir en dos ocasiones la contraseña del administrador del sistema. Procure tomar nota y evite confundirse. Tenga en mente que el sistema operativo, los servicios y los sistemas pueden tener sus propios usuarios y contraseñas.</p>
<p><a href="2-escribir-bd-y-contrasenas.png"><img class="img-fluid" src="2-escribir-bd-y-contrasenas-small.png"></a>
<a href="3-script-instalacion-terminado.png"><img class="img-fluid" src="3-script-instalacion-terminado-small.png"></a></p>
<p>Así se crearán y poblarán las tablas de la base de datos. La instalación estará terminada.</p>
<p>En la pantalla de ingreso, use como nombre de usuario <em>admin</em> y escriba la contraseña del administrador:</p>
<p><a href="4-pantalla-ingreso.png"><img class="img-fluid" src="4-pantalla-ingreso-small.png"></a></p>
<p>Estaré aprendiendiendo el uso de este sistema. Esperen comentarios futuros.</p>
    </article>
            </div>
            <div class="col-md-4">

                <div class="card my-4">
                    <h5 class="card-header">A cerca de Movimiento Libre</h5>
                    <div class="card-body">
                        Es un sitio web que busca divulgar conocimiento
                        y promover el uso de software libre. Su creador
                        es reconocido por ser un desarrollador que
                        fabrica estas herramientas tanto para entidades
                        públicas como privadas. Le invito a conocer el
                        portafolio:
                        <ul>
                            <li><a href="http://www.movimientolibre.com/portafolio/soluciones/">Soluciones en software a la medida</a></li>
                            <li>Plataformas web</li>
                            <li>Instalación y mantenimiento de sistemas operativos libres en servidores</li>
                        </ul>
                    </div>
                </div>

                <div class="card my-4">
                    <h5 class="card-header">Etiquetas</h5>
                    <div class="card-body">
                        <ul class="list-unstyled mb-0">
                            <li><a href="http://www.movimientolibre.com/tag/astronomia.html">astronomía</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/centos.html">centos</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/ciencia-de-datos.html">ciencia de datos</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/conferencias.html">conferencias</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/desarrollo.html">desarrollo</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/educacion.html">educación</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/flisol.html">flisol</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/gentoo-linux.html">gentoo linux</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/git.html">git</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/gnu-linux.html">gnu linux</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/gulag.html">gulag</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/hardware.html">hardware</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/kde.html">kde</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/kernel-linux.html">kernel linux</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/latex.html">latex</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/markdown.html">markdown</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/openstreetmap.html">openstreetmap</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/php.html">php</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/politica.html">política</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/postgresql.html">postgresql</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/ruby.html">ruby</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/software-libre.html">software libre</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/vida-cotidiana.html">vida cotidiana</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/virtualizacion.html">virtualización</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/wallpapers.html">wallpapers</a></li>
                            <li><a href="http://www.movimientolibre.com/tag/xfce4.html">xfce4</a></li>
                        </ul>
                    </div>
                </div>            </div>
        </div>
    </div>

    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="copyright text-muted">
                Copyright &copy; 2006-2018 Guillermo Valdés Lozano.<br>
                Se otorga permiso para copiar, distribuir y/o modificar estos documentos.
                Protegidos por la licencia <a href="http://www.movimientolibre.com/licencias/gfdl-es/">GFDL</a>.<br>
                Sitio web elaborado con <a href="http://getpelican.com/">Pelican</a>,
                que es programado en <a href="http://python.org/">Python</a>.
                Tema <a href="https://startbootstrap.com/template-overviews/blog-post/">Blog post</a>
                creado por <a href="https://startbootstrap.com/">Start Bootstrap</a>.
            </p>
        </div>
    </footer>

    <script src="http://www.movimientolibre.com/theme/vendor/jquery/jquery.min.js"></script>
    <script src="http://www.movimientolibre.com/theme/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>